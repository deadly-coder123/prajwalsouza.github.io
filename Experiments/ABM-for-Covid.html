<html>
	<head>
		<title>ABM for Covid</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />

		<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Calibri:400,700,400italic,700italic" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Raleway:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

		<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

		<link href="https://cdn.iconmonstr.com/1.3.0/css/iconmonstr-iconic-font.min.css" rel="stylesheet" crossorigin="anonymous">

		<!-- <script src="https://kit.fontawesome.com/00112aacc5.js" crossorigin="anonymous"></script> -->

		<link rel="icon" href="../square.png">

		<style id='sliderstyles' type="text/css">

		</style>

		<style type="text/css">
			:root {
				--themeblue: hsla(196, 100%, 50%,  1);
				--themeviolet: hsla(280, 100%, 50%,  1);
				--themeorange: hsla(32, 100%, 50%,  1);
				--boundaryorange: hsla(32, 100%, 50%, 0.6);
				--themegrey: hsla(32, 0%, 70%, 0.6);

				--themeinfected: hsla(0, 59%, 50%,  1);
			}

			.inputButDiv:focus {
				outline: none !important;
				border: 0px solid black;
			}

		</style>

		<style id="sliderStyleH" type="text/css">
			a {
				cursor: pointer;
			}

			.standardSlider {
				-webkit-appearance: none;
				border-radius: 5px;
				outline: none;
				-webkit-transition: .2s;
				transition: opacity .2s;
			}
			.standardSlider::-webkit-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 10px;
				height: 10px;
				border-radius: 50%; 
				background: hsla(200, 100%, 50%, 1);
				cursor: pointer;
			}
			.standardSlider::-moz-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 10px;
				height: 10px;
				border-radius: 50%; 
				background: hsla(200, 100%, 50%, 1);
				cursor: pointer;
			}

			/*.timesliderClass {
				-webkit-appearance: none;
				border-radius: 5px;
				outline: none;
				opacity: 0.7;
				-webkit-transition: .2s;
				transition: opacity .2s;
				cursor: pointer;
			}*/
			/*.timesliderClass::-webkit-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 22px;
				height: 22px;
				border-radius: 50%; 
				background: hsla(200, 100%, 50%, 1);
				cursor: pointer;
			}

			.timesliderClass::-moz-slider-thumb {
				appearance: none;
				width: 22px;
				height: 22px;
				border-radius: 50%; 
				background: hsla(200, 100%, 50%, 1);
				cursor: pointer;
			}*/


			body::-webkit-scrollbar {
				width: 5px;
			}

			body::-webkit-scrollbar-track {
				-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
				border-radius: 30px;
			}

			body::-webkit-scrollbar-thumb {
				background-color: hsla(195, 100%, 50%, 1);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			body::-moz-scrollbar {
				width: 5px;
			}

			body::-moz-scrollbar-track {
				-moz-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
				border-radius: 30px;
			}

			body::-moz-scrollbar-thumb {
				background-color: hsla(195, 100%, 50%, 1);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#initParameterHolder::-webkit-scrollbar {
				width: 5px;
			}

			#initParameterHolder::-webkit-scrollbar-track {
				-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
				border-radius: 30px;
			}

			#initParameterHolder::-webkit-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 1);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#initParameterHolder::-moz-scrollbar {
				width: 5px;
			}

			#initParameterHolder::-moz-scrollbar-track {
				-moz-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
				border-radius: 30px;
			}

			#initParameterHolder::-moz-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 1);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#dynaPHold::-webkit-scrollbar {
				width: 5px;
			}

			#dynaPHold::-webkit-scrollbar-track {
				-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
				border-radius: 30px;
			}

			#dynaPHold::-webkit-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 1);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#dynaPHold::-moz-scrollbar {
				width: 5px;
			}

			#dynaPHold::-moz-scrollbar-track {
				-moz-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
				border-radius: 30px;
			}

			#dynaPHold::-moz-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 1);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#graphPHold::-webkit-scrollbar {
				width: 5px;
			}

			#graphPHold::-webkit-scrollbar-track {
				-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0);
				border-radius: 30px;
			}

			#graphPHold::-webkit-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 0);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#graphPHold::-moz-scrollbar {
				width: 5px;
			}

			#graphPHold::-moz-scrollbar-track {
				-moz-box-shadow: inset 0 0 6px rgba(0,0,0,0);
				border-radius: 30px;
			}

			#graphPHold::-moz-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 0);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#dynaParameterTimeGraphH::-webkit-scrollbar {
				width: 5px;
			}

			#dynaParameterTimeGraphH::-webkit-scrollbar-track {
				-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0);
				border-radius: 30px;
			}

			#dynaParameterTimeGraphH::-webkit-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 0);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			#dynaParameterTimeGraphH::-moz-scrollbar {
				width: 5px;
			}

			#dynaParameterTimeGraphH::-moz-scrollbar-track {
				-moz-box-shadow: inset 0 0 6px rgba(0,0,0,0);
				border-radius: 30px;
			}

			#dynaParameterTimeGraphH::-moz-scrollbar-thumb {
				background-color: hsla(196, 100%, 50%, 0);
				border-radius: 50px;
				/*outline: 1px solid slategrey;*/
			}

			

			

			#fileinputBack::focus {
				outline: none;
			}

			#savebutton::focus {
				outline: none;
			}

			#savebuttonH::focus {
				outline: none;
			}

			input:invalid {
				box-shadow:0 0 0px hsla(0,0%,0%,0);
			}

		
		</style>
		
		<script>

		  // (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  // (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  // m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  // })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  // ga('create', 'UA-103589215-2', 'auto');
		  // ga('send', 'pageview');

		</script>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.6.1/math.min.js"></script> -->

		
		<script type="application/ld+json">
			{
			  "@type": "Simulation",
			  "name": "ABM For Covid",
			  "author": "Shrisha Rao, Ashuthosh Trivedi, Gunjan, Nanda Kishore, Prajwal DSouza",
			  "description": "Simulation and Results of Agent Based Model for Covid19."
			  }
		</script>

		  <meta charset="UTF-8">
		  <meta name="description" content="Simulation and Results of Agent Based Model for Covid19.">
		  <meta name="keywords" content="epidemic, coronavirus,SEIR model, Agent based model, covid19">
		  <meta name="author" content="Shrisha Rao, Ashuthosh Trivedi, Gunjan, Nanda Kishore, Prajwal DSouza">
		  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body style='margin:0px; display: block;'>
		<div id="containAll" style='margin:0px;width:100%; height: 260%; font-size: 0; display: inline-block; position: relative; '>
			<div id="TopBar" style="width: 100%; height: 6%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
				<div id="TopBarGraphH" style="width: 100%; height: 100%; overflow: hidden;position: absolute; z-index: 1;display: inline-block;">
				</div>
				<div id="VS1" style="width: 2%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
				<div id="titleAndMenuH" style="width: 96%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block; ">
					<div id="titleAndDescription" style="width: 100%; height: 75%; overflow: hidden;position: relative; z-index: 1;display: flex; align-items: center;">
						<div id="titleH">
							<font style="font-family: Raleway; font-size: 2.2vmax; font-weight: bold; "> ABM for Covid</font><br/><font style="font-family: Source Sans Pro; font-size: 0.7vmax; font-weight: bold; "> Agent Based Modeling</font>
						</div>
					</div>
					<div id="menuH" style="width: 100%; height: 25%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
						<div id="labmenuH" style="width: 7%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-size: 1vmax; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; border-bottom: 2px solid hsla(190, 100%, 50%, 1); text-align: center;">Laboratory</div>
						<div id="menuVS1" style="width: 2%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="aboutmenuH" style="width: 7%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-size: 1vmax; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; border-bottom: 2px solid hsla(190, 100%, 50%, 0); text-align: center;">About</div>
						<div id="menuVS2" style="width: 2%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="FAQmenuH" style="width: 7%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-size: 1vmax; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; border-bottom: 2px solid hsla(190, 100%, 50%, 0); text-align: center;">FAQ</div>
						<div id="menuVS3" style="width: 2%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="updatesmenuH" style="width: 7%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-size: 1vmax; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; border-bottom: 2px solid hsla(190, 100%, 50%, 0); text-align: center;">Updates</div>
						<div id="menuVS4" style="width: 2%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="teammenuH" style="width: 7%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-size: 1vmax; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; border-bottom: 2px solid hsla(190, 100%, 50%, 0); text-align: center;">Team</div>
						<div id="menuVS5" style="width: 40%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="githubIconH" style="width: 2%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; text-align: center;"><i class="im im-github" style="font-size: 1.1vmax; "></i></div>
						<div id="menuVS6" style="width: 1%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="twitterIconH" style="width: 2%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block; font-size: 0.6vmax; font-family: Source Sans Pro; font-weight: bold; cursor: pointer; text-align: center; color: hsla(196, 100%, 50%, 1);"><i class="im im-twitter" style="font-size: 1.1vmax; "></i></div>
						<div id="menuVS6" style="width: 2%; height: 90%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						
					</div>
				</div>
				<div id="VS2" style="width: 2%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
			</div>
			<div id="MiddleBar" style="width: 100%; height: 88%; overflow: hidden;position: relative; z-index: 1;display: inline-block; background: hsla(0, 0%, 92%, 1);">
				<div id="VS3" style="width: 2%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
				<div id="middleSection" style="width: 96%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block; ">
					<div id="HS1" style="width: 100%; height: 1.5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
					<div id="initParametersH" style="width: 100%; height: 22%; overflow: hidden;position: relative; z-index: 1;display: inline-block; background: white; border-radius: 10px;">
						<div id="VSi1" style="width: 2.5%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="initParameters" style="width: 95%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
							<div id="HSi1" style="width: 100%; height: 5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
							<div id="experimentNameHLane" style="width: 100%; height: 9%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								<div id="experimentName" style="width: 10%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div style="width: 100%; height: 100%; font-family: Source Sans Pro; font-size: 1.3vmax; display:flex; align-items: center;">EXPERIMENT</div>
								</div>
								<div id="VSii1" style="width: 69%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="runName" style="width: 6%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block; ">
									<div style="width: 100%; height: 90%; background: hsla(195, 100%, 50%, 1); border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
										<div style="width: 100%; height: 100%; font-family: Source Sans Pro; font-size: 1vmax; color: white; font-weight: bold; display:flex; align-items: center; justify-content: center;">RUN</div>
									</div>
								</div>
								<div id="VSii2" style="width: 2%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="shareName" style="width: 13%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block; ">
									<div style="width: 100%; height: 90%; background: hsla(280, 100%, 50%, 1); border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
										<div style="width: 100%; height: 100%; font-family: Source Sans Pro; font-size: 1vmax; color: white; font-weight: bold; display:flex; align-items: center; justify-content: center;">Shareable Link</div>
									</div>
								</div>
							</div>
							<div id="HSi2" style="width: 100%; height: 1%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
							<div id="initParametersName" style="width: 100%; height: 8%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								<div style="width: 100%; height: 100%; font-family: Source Sans Pro; font-size: 1.3vmax; display:flex; align-items: center;">Initial Parameters</div>
							</div>
							<div id="HSi3" style="width: 100%; height: 1%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div><br/>
							<div id="gradfillinitParameters" style='margin:0px;width:100%; height: 67%; display: inline-block; position: absolute; pointer-events: none; background: linear-gradient(to bottom,hsla(0, 0%, 0%, 0), hsla(0, 100%, 100%, 0) 0%, hsla(0, 100%, 100%, 1) 0%, hsla(0, 100%, 100%, 0) 7%, hsla(0, 0%, 100%, 0) 90%,hsla(0, 100%, 100%, 1) 100%,hsla(0, 100%, 100%, 0) 100%,hsla(0, 100%, 100%, 0)); z-index: 2;'></div>
							<div id="initParameterHolder" style="width: 100%; height: 67%; overflow: auto; position: relative; z-index: 1;display: inline-block;">
								<div id="HSii1" style="width: 100%; height: 5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox1" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner1" style="margin:0px;width:100%;position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter1Text" style="margin:0px;width:43%; position: relative; z-index: 1; display: inline-block; text-align: left; ">Agent Density &nbsp<font id="parameter1Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">How many agent per sq of pixel in our simulation</font>
										</div>
										<div id="parameter1SliderSpacer" style="margin:0px;width:2%; position: relative;"></div>
										<div id="parameter1SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer1" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox2" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner2" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter2Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Hospital bed per agent &nbsp<font id="parameter2Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">Set the factor at which hospitals are available in the env/agent</font>
										</div>
										<div id="parameter1SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter2SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer2" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="HSii2" style="width: 100%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox3" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner3" style="margin:0px;width:100%;position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter3Text" style="margin:0px;width:43%; position: relative; z-index: 1; display: inline-block; text-align: left; ">ICU bed per hospital bed &nbsp<font id="parameter3Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">How many ICU beds are available per hospital bed. </font>
										</div>
										<div id="parameter3SliderSpacer" style="margin:0px;width:2%; position: relative;"></div>
										<div id="parameter3SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer3" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox4" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner4" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter4Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Infection percent &nbsp<font id="parameter4Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">% of agents are infectious at the start of simulation</font>
										</div>
										<div id="parameter4SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter4SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer4" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="HSii3" style="width: 100%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="ageDisTextH" style="margin:0px;width:17%;position: relative; z-index: 1;display: inline-block;">
									<div id="ageDisTextInner" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="ageDisText" style="margin:0px;width:95%; position: relative; z-index: 1; display: inline-block; text-align: left; color: hsla(270, 100%, 50%, 1);">Age Distribution <br/>(Triangular Distribution) &nbsp
										</div>
									</div>
								</div>
								<div id="parameterBox5" style="margin:0px;width:24%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner5" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter5Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Distribution age minimum &nbsp<font id="parameter5Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;"></font>
										</div>
										<div id="parameter5SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter5SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer5" style="width: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox6" style="margin:0px;width:24%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner6" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter6Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Distribution age maximum &nbsp <font id="parameter6Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;"></font>
										</div>
										<div id="parameter6SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter6SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer6" style="width: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox7" style="margin:0px;width:24%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner7" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter7Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Distribution age peak &nbsp<font id="parameter7Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;"></font>
										</div>
										<div id="parameter7SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter7SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer7" style="width: 5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="HSii4" style="width: 100%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="hygDisTextH" style="margin:0px;width:17%;position: relative; z-index: 1;display: inline-block;">
									<div id="hygDisTextInner" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="hygDisText" style="margin:0px;width:95%; position: relative; z-index: 1; display: inline-block; text-align: left; color: hsla(270, 100%, 50%, 1);">Hygiene Distribution
										</div>
									</div>
								</div>
								<div id="parameterBox8" style="margin:0px;width:36%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner8" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter8Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Distribution Hygiene mean &nbsp<font id="parameter8Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;"></font>
										</div>
										<div id="parameter8SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter8SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer8" style="width: 6%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox9" style="margin:0px;width:36%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner9" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter9Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Distribution Hygiene Var &nbsp<font id="parameter9Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;"></font>
										</div>
										<div id="parameter9SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter9SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer9" style="width: 5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="HSii5" style="width: 100%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox10" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner10" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter10Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Essential Agent percent &nbsp<font id="parameter10Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.1</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">What % of agents are essentials? ( They will be mobile under the lockdown)</font>
										</div>
										<div id="parameter10SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter10SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer10" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox11" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner11" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter11Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Testing Efficiency &nbsp<font id="parameter11Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.3</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">Percentage of false negatives in testing</font>
										</div>
										<div id="parameter11SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter11SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer11" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="HSii6" style="width: 100%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox12" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner12" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter12Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Contact Tracing Capacity &nbsp<font id="parameter12Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">5</font><br/><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;">Tracing extent factor</font>
										</div>
										<div id="parameter12SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter12SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer12" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="parameterBox13" style="margin:0px;width:40%;position: relative; z-index: 1;display: inline-block;">
									<div id="parameterBoxInner13" style="margin:0px;width:100%; position: relative; z-index: 1;display: flex; font-size: 1vmax; font-family: Source Sans Pro;">
										<div id="parameter13Text" style="margin:0px;width:41%; position: relative; z-index: 1; display: inline-block; text-align: left;">Social Distancing Efficiency &nbsp<font id="parameter13Value" style="font-weight:bold; color:hsla(195, 100%, 50% , 1);">0.6</font><font style="color:hsla(0, 0%, 60%, 1); font-size: 0.8vmax;"></font>
										</div>
										<div id="parameter13SliderSpacer" style="margin:0px;width:4%; position: relative;"></div>
										<div id="parameter13SliderH" style="margin:0px;width:55%; position: relative; z-index: 1; display: flex; align-items: center;"></div>
									</div>
								</div>
								<div id="parameterSpacer13" style="width: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="HSiiLast" style="width: 100%; height: 15%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
							</div>
						</div>
						<div id="VSi2" style="width: 2.5%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
					</div>
					<div id="HS2" style="width: 100%; height: 2%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
					<div id="dynaParametersH" style="width: 100%; height: 73%; overflow: hidden;position: relative; z-index: 1;display: inline-block; background: white; border-radius: 10px;">
						<div id="VSi1" style="width: 2.5%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						<div id="dynaParameters" style="width: 95%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
							<div id="HSi1" style="width: 100%; height: 2%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
							<div id="dynaParametersName" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								<div style="width: 100%; height: 100%; font-family: Source Sans Pro; font-size: 1.3vmax; display:flex; align-items: center;">Dynamic Parameters &nbsp | &nbsp Policies</div>
							</div>
							<div id="HSi2" style="width: 100%; height: 0.5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
							<div id="dynaParameterTime" style="width: 20%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								<div id="timelabelText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; justify-content: flex-end; font-family: Source Sans Pro; font-size: 1vmax; text-align: right;">
									<div>
										Time (Days)
									</div>
								</div>
							</div>
							<div id="dynaFullGraphH" style="width: 80%; height: 98%; overflow: hidden;position: absolute; z-index: 1;display: inline-block; font-family: Source Sans Pro; font-size: 1vmax;">
							</div>
							<div id="dynaParameterTimeGraphH" style="width: 80%; height: 3%; overflow-y: scroll;position: relative; z-index: 1;display: inline-block;">

							</div>
							<div id="dynaPHold" style="width: 100%; height: 46%; overflow: auto;position: relative; z-index: 1;display: inline-block;">
								<div id="HSi3" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterBorderClosingTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterBorderClosingText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Border Closing<font style="color: grey; font-size: 0.9vmax"><br/>Close border and stop incoming of travelers with infection</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterBorderClosingH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">

								</div>
								<div id="HSi4" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterHospitalizationTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterHospitalizationText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Hospitalization<font style="color: grey; font-size: 0.9vmax"><br/>Very sick agents goes to hospital and isolated.</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterHospitalizationH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<div id="HSi5" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterLockdownTextBox" style="width: 20%; height: 15%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterLockDownTextownText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Lockdown<font style="color: grey; font-size: 0.9vmax"><br/>Lockdown with essential agents running. Number of essential agents is defined among the initial parameters</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterLockdownParts" style="width: 80%; height: 15%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									
									<div id="dynaParameterLockdownTop" style="width: 100%; height: 21.42857142857143%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									</div>
									<div id="dynaParameterLockdownH" style="width: 100%; height: 57.14285714285714%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									</div>
								</div>
								<div id="HSi6" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterQuarantineTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterQuarantineText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Quarantine<font style="color: grey; font-size: 0.9vmax"><br/>Sick and tested positive cases goes to quarantine.</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterQuarantineH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<div id="HSi7" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterDailytestingTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterDailytestingText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Testing Capacity : Daily Testing<font style="color: grey; font-size: 0.9vmax"><br/>Every day testing happens for certain number of agent. Agents are chosen at random.</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterDailytestingH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<!-- <div id="HSi8" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div> -->
								<div id="dynaParameterTestingCapacityTextBox" style="width: 20%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterTestingCapacityText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Tests per day<font style="color: grey; font-size: 0.9vmax"><br/>Number of tests on a given day can vary. Please drag the points on the graph to change the values.</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterTestingCapacityH" style="width: 80%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<div id="HSi9" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterContactTracingTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterContactTracingText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Contact Tracing<font style="color: grey; font-size: 0.9vmax"><br/>Contact tracing of all agents</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterContactTracingH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<div id="HSi10" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterICUBedsTextBox" style="width: 20%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterICUBedsText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Reinforcements : Additional ICU Beds<font style="color: grey; font-size: 0.9vmax"><br/>New ICU beds added</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterICUBedsH" style="width: 80%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<!-- <div id="HSi11" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div> -->
								<div id="dynaParameterHBedsTextBox" style="width: 20%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterHBedsText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Reinforcements : Additional Hospital Beds<font style="color: grey; font-size: 0.9vmax"><br/>New regular hospital beds added</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterHBedsH" style="width: 80%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<div id="HSi12" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterSocialDistancingTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterSocialDistancingText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Social Distancing<font style="color: grey; font-size: 0.9vmax"><br/> Agents follow social distancing.</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterSocialDistancingH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<div id="HSi13" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="dynaParameterAgeBasedLockDownTextBox" style="width: 20%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterAgeBasedLockDownText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Age based lockdown<font style="color: grey; font-size: 0.9vmax"><br/>People below the a certain age are free to move. </font>
										</div>
									</div>
								</div>
								<div id="dynaParameterAgeBasedLockDownH" style="width: 80%; height: 10%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
								<!-- <div id="HSi14" style="width: 100%; height: 3%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div> -->
								<div id="dynaParameterAgeThresholdTextBox" style="width: 20%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="dynaParameterAgeThresholdText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1vmax; text-align: left;">
										<div>
											Lockdown Age Threshold<font style="color: grey; font-size: 0.9vmax"><br/>Age below which people are free to move.</font>
										</div>
									</div>
								</div>
								<div id="dynaParameterAgeThresholdH" style="width: 80%; height: 33%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
							</div>
							<div id="graphPHold" style="width: 100%; height: 45%; overflow-y: scroll;position: relative; z-index: 1;display: inline-block;">
								<div id="HSi15" style="width: 100%; height: 1%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
								<div id="graphTextBox" style="width: 20%; height: 99%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
									<div id="graphInfoText" style="width: 100%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-flex; align-items: center; font-family: Source Sans Pro; font-size: 1.3vmax; text-align: left;">
										<div>
											Graph Plot<font style="color: grey; font-size: 0.9vmax"><br/>Various results plotted with the time</font><br/><br/>
											<input type="checkbox" id="infected_agents" onchange="graphCheck(event)" name="infected_agents" value="0">&nbsp&nbsp<label for="infected_agents_check" style="text-indent: 1%; color: hsla(2, 100%, 50%, 1); font-size: 1vmax;">Infected Agents</label><br/>
											<input type="checkbox" id="exposed_agents" onchange="graphCheck(event)" name="exposed_agents" value="0">&nbsp&nbsp<label for="exposed_agents_check" style="text-indent: 1%; color: hsla(320, 100%, 50%, 1); font-size: 1vmax;">Exposed Agents</label><br/>
											<input type="checkbox" id="recovered_agents" onchange="graphCheck(event)" name="recovered_agents" value="0">&nbsp&nbsp<label for="recovered_agents_check" style="text-indent: 1%; color: hsla(280, 100%, 50%, 1); font-size: 1vmax;">Recovered Agents</label><br/>
											<input type="checkbox" id="dead_agents" onchange="graphCheck(event)" name="dead_agents" value="0">&nbsp&nbsp<label for="dead_agents_check" style="text-indent: 1%; color: hsla(280, 0%, 50%, 1); font-size: 1vmax;">Dead Agents</label><br/>
											<input type="checkbox" id="asympt_agents" onchange="graphCheck(event)" name="asympt_agents" value="0">&nbsp&nbsp<label for="asympt_agents_check" style="text-indent: 1%; color: hsla(230, 100%, 50%, 1); font-size: 1vmax;">Asymptomatic Agents</label><br/>
											<input type="checkbox" id="suscept_agents" onchange="graphCheck(event)" name="suscept_agents" value="0">&nbsp&nbsp<label for="suscept_agents_check" style="text-indent: 1%; color: hsla(190, 100%, 50%, 1); font-size: 1vmax;">Susceptible Agents</label><br/><br/>
											
											
										</div>
									</div>
								</div>
								<div id="plotGH" style="width: 80%; height: 99%; overflow: hidden;position: relative; z-index: 1;display: inline-block;">
								</div>
							</div>
							<div id="HSii2Last" style="width: 100%; height: 0.5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
						</div>
					</div>
					<div id="HS3" style="width: 100%; height: 1.5%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
				</div>
				<div id="VS4" style="width: 2%; height: 100%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
			</div>
			<div id="BottomBar" style="width: 100%; height: 6%; overflow: hidden;position: relative; z-index: 1;display: inline-block;"></div>
		</div>
		<script type="text/javascript">

		function infodisplay(infodata) {
			document.getElementById('infoH').innerHTML = infodata
		}

		function setDarkMode() {
			if (darkmode) {
				darkmode = false
				document.getElementById('darkmodeoption').style.backgroundColor = 'hsla(190, 100%, 0%, 0.2)'
				document.getElementById('darkmodeoption').style.color = 'hsla(190, 100%, 100%, 1)'
				document.getElementById('darkmodeoption').style.fontWeight = 'normal'

				document.body.style.background = 'white'

				document.getElementById('maintitle').style.color = 'hsla(190, 100%, 0%, 1)'
				document.getElementById('websitelink').style.color = 'hsla(260, 100%, 60%, 1)'
				document.getElementById('asimulationtext').style.color = 'hsla(190, 100%, 60%, 1)'

				document.getElementById('info').style.color = 'hsla(190, 100%, 0%, 1)'

				options = {}
				options.pointcolor = 'hsla(260, 100%, 50%, 1)'
				updatePoint('simulationgraph', 'cat', options)

				options = {}
				options.textcolor = 'hsla(260, 0%, 0%, 1)'
				updateText('simulationgraph', 'cattext', options)

				options = {}
				options.pointcolor = 'hsla(260, 0%, 0%, 1)'
				updatePoint('simulationgraph', 'mouse', options)

				options = {}
				options.textcolor = 'hsla(260, 0%, 0%, 1)'
				updateText('simulationgraph', 'mousetext', options)

				options = {}
				options.textcolor = 'hsla(260, 0%, 0%, 1)'
				document.getElementById('mousestatusdisplay').style.color = options.textcolor
				
				document.getElementById('darkback').style.backgroundColor = 'transparent'

				document.getElementById('controltab').style.backgroundColor = "hsla(260, 100%, 50%, 0.4)"
				document.getElementById('strategytab').style.backgroundColor = "hsla(260, 100%, 50%, 0.4)"
				document.getElementById('settingtab').style.backgroundColor = "hsla(260, 100%, 50%, 0.4)"

				document.getElementById('controltab').style.color = "black"
				document.getElementById('strategytab').style.color = "black"
				document.getElementById('settingtab').style.color = "black"

				if (currenttab == 'controltab') {
					document.getElementById('controltab').style.color = "white"
					for (bn = 1; bn < 13; bn++) {
						document.getElementById('cbtn' + bn).style.color = "black"
						document.getElementById('cbtn' + bn).style.backgroundColor = "transparent"
					}
				}
				else if (currenttab == 'strategytab') {
					document.getElementById('strategytab').style.color = "white"
				}
				else if (currenttab == 'settingtab') {
					document.getElementById('settingtab').style.color = "white"
				}

				for (m = 0; m < strategies.length; m++) {
					if (statname == strategies[m]) {
						document.getElementById(strategies[m]).style.color = 'hsla(190, 100%, 50%, 1)'
						document.getElementById(strategies[m] + '-box').style.color = 'black'
					}
					else {
						document.getElementById(strategies[m]).style.color = 'black'
						document.getElementById(strategies[m] + '-box').style.color = 'black'
					}
				}


				document.getElementById('catspeedtext').style.color = "black"
				document.getElementById('catspeedinput').style.color = "black"
				document.getElementById('catspeedinput').style.backgroundColor = "transparent"
				document.getElementById('mousespeedtext').style.color = "black"
				document.getElementById('mousespeedinput').style.color = "black"
				document.getElementById('mousespeedinput').style.backgroundColor = "transparent"

				for (st = 0; st < 5; st++) {
					if (settingstatus[st]) {
						document.getElementById(settingslist[st]).style.color = "hsla(190, 100%, 50%, 1)"
						document.getElementById(settingslist[st] + '-box').style.color = "hsla(190, 100%, 0%, 1)"
					}
					else {
						document.getElementById(settingslist[st]).style.color = "hsla(190, 100%, 0%, 1)"
						document.getElementById(settingslist[st] + '-box').style.color = "hsla(190, 100%, 0%, 1)"
					}
				}

				options = {}
				options.circlecolor = 'hsla(190, 100%, 50%, 1)'
				updateCircle('simulationgraph', 'pond', options)

				options = {}
				options.pointcolor = 'hsla(200, 100%, 0%, 0.5)'
				updatePoint('simulationgraph', 'oppositePoint', options)

				if (mode != 'portrait') {
					for (stg = 0; stg < strategies.length; stg++) {
						document.getElementById(strategies[stg]).style.backgroundColor = 'hsla(190, 100%, 0%, 0.1)'
					}
				}
					

			}
			else {
				darkmode = true
				document.getElementById('darkmodeoption').style.backgroundColor = 'hsla(190, 100%, 50%, 1)'
				document.getElementById('darkmodeoption').style.color = 'hsla(190, 100%, 100%, 1)'
				document.getElementById('darkmodeoption').style.fontWeight = 'bold'

				document.body.style.background = 'black'

				document.getElementById('maintitle').style.color = 'hsla(190, 100%, 100%, 1)'

				document.getElementById('maintitle').style.color = 'hsla(190, 100%, 100%, 1)'
				document.getElementById('websitelink').style.color = 'hsla(260, 100%, 80%, 1)'
				document.getElementById('asimulationtext').style.color = 'hsla(190, 100%, 80%, 1)'

				document.getElementById('info').style.color = 'hsla(190, 0%, 90%, 1)'

				


				options = {}
				options.pointcolor = 'hsla(260, 100%, 100%, 1)'
				updatePoint('simulationgraph', 'cat', options)

				options = {}
				options.textcolor = 'hsla(260, 0%, 100%, 1)'
				updateText('simulationgraph', 'cattext', options)

				options = {}
				options.pointcolor = 'hsla(260, 0%, 100%, 1)'
				updatePoint('simulationgraph', 'mouse', options)

				options = {}
				options.textcolor = 'hsla(260, 0%, 100%, 1)'
				updateText('simulationgraph', 'mousetext', options)


				options = {}
				options.textcolor = 'hsla(260, 0%, 100%, 1)'
				document.getElementById('mousestatusdisplay').style.color = options.textcolor

				document.getElementById('darkback').style.backgroundColor = 'hsla(190, 0%, 10%, 1)'

				if (currenttab == 'controltab') {
					document.getElementById('controltab').style.backgroundColor = "hsla(260, 0%, 20%, 1)"
					document.getElementById('controltab').style.color = "white"
					for (k = 1; k < 13; k++) {
						document.getElementById('cbtn' + k).style.backgroundColor = "hsla(190, 100%, 0%, 1)"
						document.getElementById('cbtn' + k).style.color = "hsla(190, 100%, 50%, 1)"
					}

				}
				else {
					document.getElementById('controltab').style.backgroundColor = "hsla(260, 0%, 0%, 1)"
					document.getElementById('controltab').style.color = "hsla(100, 0%, 55%, 1)"
				}

				if (currenttab == 'strategytab') {
					document.getElementById('strategytab').style.backgroundColor = "hsla(260, 0%, 20%, 1)"
					document.getElementById('strategytab').style.color = "white"
				}
				else {
					document.getElementById('strategytab').style.backgroundColor = "hsla(260, 0%, 0%, 1)"
					document.getElementById('strategytab').style.color = "hsla(100, 0%, 55%, 1)"
				}

				if (currenttab == 'settingtab') {
					document.getElementById('settingtab').style.backgroundColor = "hsla(260, 0%, 20%, 1)"
					document.getElementById('settingtab').style.color = "white"
				}
				else {
					document.getElementById('settingtab').style.backgroundColor = "hsla(260, 0%, 0%, 1)"
					document.getElementById('settingtab').style.color = "hsla(100, 0%, 55%, 1)"
				}

				statname = tactic

				for (m = 0; m < strategies.length; m++) {
					if (statname == strategies[m]) {
						document.getElementById(strategies[m]).style.color = 'hsla(190, 100%, 50%, 1)'
						document.getElementById(strategies[m] + '-box').style.color = 'white'
					}
					else {
						document.getElementById(strategies[m]).style.color = 'white'
						document.getElementById(strategies[m] + '-box').style.color = 'white'
					}
				}

				document.getElementById('catspeedtext').style.color = "white"
				document.getElementById('catspeedinput').style.color = "white"
				document.getElementById('catspeedinput').style.backgroundColor = "black"
				document.getElementById('mousespeedtext').style.color = "white"
				document.getElementById('mousespeedinput').style.color = "white"
				document.getElementById('mousespeedinput').style.backgroundColor = "black"

				for (st = 0; st < 5; st++) {
					if (settingstatus[st]) {
						document.getElementById(settingslist[st]).style.color = "hsla(190, 100%, 50%, 1)"
						document.getElementById(settingslist[st] + '-box').style.color = "hsla(190, 100%, 100%, 1)"
					}
					else {
						document.getElementById(settingslist[st]).style.color = "hsla(190, 100%, 100%, 1)"
						document.getElementById(settingslist[st] + '-box').style.color = "hsla(190, 100%, 100%, 1)"
					}
				}

				options = {}
				options.circlecolor = 'hsla(200, 100%, 50%, 1)'
				updateCircle('simulationgraph', 'pond', options)

				options = {}
				options.pointcolor = 'hsla(200, 100%, 100%, 0.5)'
				updatePoint('simulationgraph', 'oppositePoint', options)

				if (mode != 'portrait') {
					for (stg = 0; stg < strategies.length; stg++) {
						document.getElementById(strategies[stg]).style.backgroundColor = 'black'
					}
				}
			}
		}

		darkmode = false

		if (darkmode) {
			document.body.style.background = 'black'
		}

		function graphToSvgY(value, graphymin, graphymax) {
			if (graphymin == graphymax) {
				graphymin = graphymin - 1
				graphymax = graphymax + 1
				console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphymax + ' and Min value : ' + graphymin)
			}
			if (graphymin > graphymax) {
				temp = graphymin
				graphymin = graphymax
				graphymax = temp
				console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphymax + ' and Min value : ' + graphymin)
			}
			y = ((-80)/(graphymax - graphymin))*(value - graphymin) + 90
			return y
		}

		function graphToScaledY(value, graphymin, graphymax, aspectratio) {
			if(aspectratio > 1) {
				if (graphymin == graphymax) {
					graphymin = graphymin - 1
					graphymax = graphymax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				if (graphymin > graphymax) {
					temp = graphymin
					graphymin = graphymax
					graphymax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				y = ((-80)/(graphymax - graphymin))*(value - graphymin) + 90
				
			}
			else {
				if (graphymin == graphymax) {
					graphymin = graphymin - 1
					graphymax = graphymax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				if (graphymin > graphymax) {
					temp = graphymin
					graphymin = graphymax
					graphymax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				aspectratio = 1/aspectratio
				vl = (100*(1 - aspectratio)/2) + (10*aspectratio)
				vh = (100*(aspectratio + 1)/2) - (10*aspectratio)
				y = ((vl - vh)/(graphymax - graphymin))*(value - graphymin) + vh
				// console.log(x)
				// console.log(v1, v2)
				// y = (((v2 - v1)/(100))*(y)) + v1
			}

			return y
		}

		function svgToGraphY(percentvalue, graphymin, graphymax, aspectratio) {
			if(aspectratio > 1) {
				if (graphymin == graphymax) {
					graphymin = graphymin - 1
					graphymax = graphymax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				if (graphymin > graphymax) {
					temp = graphymin
					graphymin = graphymax
					graphymax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}

				y = ((percentvalue - 90)*(graphymax - graphymin)/((-1)*80)) + graphymin
				
			}
			else {
				if (graphymin == graphymax) {
					graphymin = graphymin - 1
					graphymax = graphymax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				if (graphymin > graphymax) {
					temp = graphymin
					graphymin = graphymax
					graphymax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphymax + ' and Min value : ' + graphymin)
				}
				aspectratio = 1/aspectratio
				vl = (100*(1 - aspectratio)/2) + (10*aspectratio)
				vh = (100*(aspectratio + 1)/2) - (10*aspectratio)

				// y = ((vl - vh)/(graphymax - graphymin))*(value - graphymin) + vh
				y = (((percentvalue - vh)*(graphymax - graphymin))/(vl - vh)) + graphymin
				// console.log(x)
				// console.log(v1, v2)
				// y = (((v2 - v1)/(100))*(y)) + v1
			}

			return y
		}

		function graphToSvgX(value, graphxmin, graphxmax) {
			if (graphxmin == graphxmax) {
				graphxmin = graphxmin - 1
				graphxmax = graphxmax + 1
				console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
			}
			if (graphxmin > graphxmax) {
				temp = graphxmin
				graphxmin = graphxmax
				graphxmax = temp
				console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
			}
			x = ((80)/(graphxmax - graphxmin))*(value - graphxmin) + 10
			return x
		}

		function graphToScaledX(value, graphxmin, graphxmax, aspectratio) {
			if (aspectratio <= 1) {
				if (graphxmin == graphxmax) {
					graphxmin = graphxmin - 1
					graphxmax = graphxmax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				if (graphxmin > graphxmax) {
					temp = graphxmin
					graphxmin = graphxmax
					graphxmax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				x = ((80)/(graphxmax - graphxmin))*(value - graphxmin) + 10
			}
			else {
				if (graphxmin == graphxmax) {
					graphxmin = graphxmin - 1
					graphxmax = graphxmax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				if (graphxmin > graphxmax) {
					temp = graphxmin
					graphxmin = graphxmax
					graphxmax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				vl = (100*(1 - aspectratio)/2) + (10*aspectratio)
				vh = (100*(aspectratio + 1)/2) - (10*aspectratio)
				x = ((vh - vl)/(graphxmax - graphxmin))*(value - graphxmin) + vl
				// console.log(x)
				// console.log(v1, v2)
				// y - y1 = (y2 - y1)/(x2 - x1) * (x - x1)
				// x = (((v2 - v1)/(90))*(x - 10)) + v1
				// console.log(x)
				// console.log('_') 
			}
			return x
		}

		function svgToGraphX(percentvalue, graphxmin, graphxmax, aspectratio) {
			if (aspectratio <= 1) {
				if (graphxmin == graphxmax) {
					graphxmin = graphxmin - 1
					graphxmax = graphxmax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				if (graphxmin > graphxmax) {
					temp = graphxmin
					graphxmin = graphxmax
					graphxmax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}

				x = ((percentvalue - 10)*(graphxmax - graphxmin)/80) + graphxmin
			}
			else {
				if (graphxmin == graphxmax) {
					graphxmin = graphxmin - 1
					graphxmax = graphxmax + 1
					console.log('Conversion error, maximum value is equal to minimum value. Max value was raised by 1 and Min value was reduced by 1. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				if (graphxmin > graphxmax) {
					temp = graphxmin
					graphxmin = graphxmax
					graphxmax = temp
					console.log('Conversion error, maximum value less than minimum value. Values were swapped. Max value : ' + graphxmax + ' and Min value : ' + graphxmin)
				}
				vl = (100*(1 - aspectratio)/2) + (10*aspectratio)
				vh = (100*(aspectratio + 1)/2) - (10*aspectratio)

				// x = ((vh - vl)/(graphxmax - graphxmin))*(value - graphxmin) + vl

				x = ((percentvalue - vl)*(graphxmax - graphxmin)/(vh - vl)) + graphxmin

				// y - y1 = (y2 - y1)/(x2 - x1) * (x - x1)
				// x = (((v2 - v1)/(90))*(x - 10)) + v1
				 
			}
			return x
		}

		function isInt(n){
			return Number(n) === n && n % 1 === 0;
		}

		function isFloat(n){
			return Number(n) === n && n % 1 !== 0;
		}

		function gridtickvalues(valmin, valmax, ticksexpected) {
			expstring = ((valmax - valmin)/ticksexpected).toExponential()
			majorgridorder = parseFloat(Math.pow(10 , expstring.slice(expstring.indexOf('e') + 1)))
			
			if (expstring.indexOf('.') != -1) {
				majorgriddivision = parseFloat(expstring.slice(0, expstring.indexOf('.'))*majorgridorder)	
			}
			else {
				majorgriddivision = parseFloat(expstring.slice(0, expstring.indexOf('e'))*majorgridorder)
			}
			

			integerchoices = [1,2,5,10]
			for(choice = 0; choice < integerchoices.length - 1; choice++) {
				if (majorgriddivision < integerchoices[choice + 1]*majorgridorder) {
					majorgriddivisionchoice = majorgridorder*integerchoices[choice]
					break
				}
			}

			if(valmin > 0) {
				majorgridstart = Math.ceil(valmin/majorgriddivisionchoice)*majorgriddivisionchoice;
				majorgridstart = majorgridstart - majorgriddivisionchoice
			}
			else if(valmin < 0) {
				majorgridstart = Math.floor(valmin/majorgriddivisionchoice)*majorgriddivisionchoice;
			}
			else{
				majorgridstart = majorgriddivisionchoice;
			}

			// majorgridstart = majorgridstart - majorgriddivisionchoice
			// console.log(majorgridstart, (valmax + majorgriddivisionchoice), majorgriddivisionchoice)

			majortickvalues = []
			for(majoraxispoint = majorgridstart; majoraxispoint < (valmax + majorgriddivisionchoice); majoraxispoint = majoraxispoint + majorgriddivisionchoice) {
				majortickvalues.push(majoraxispoint)
			}

			return majortickvalues
		}

		function updateGraphZoom(graphname, newMinMax) {
			gdata = graphData[graphname]

			svgElement = gdata.svgElement

			if (newMinMax.xmin != 0) {
				gdata.xmin = newMinMax.xmin || gdata.xmin
			}
			else {
				gdata.xmin = 0
			}

			if (newMinMax.xmax != 0) {
				gdata.xmax = newMinMax.xmax || gdata.xmax
			}
			else {
				gdata.xmax = 0
			}

			if (newMinMax.ymin != 0) {
				gdata.ymin = newMinMax.ymin || gdata.ymin
			}
			else {
				gdata.ymin = 0
			}

			if (newMinMax.ymax != 0) {
				gdata.ymax = newMinMax.ymax || gdata.ymax
			}
			else {
				gdata.ymax = 0
			}

			aratio = gdata.aspectratio

			if (gdata.unitAspectRatio == 'yes') {
				if (gdata.fixAxis == 'yaxis') {
					if (gdata.fixAxisStretchCentrally == 'yes') {
						centre = (gdata.xmax + gdata.xmin)/2
						gdata.xmin = centre - ((gdata.ymax - gdata.ymin)*aratio/2)
						gdata.xmax = centre + ((gdata.ymax - gdata.ymin)*aratio/2)
					}
					else {
						gdata.xmax = gdata.xmin + (gdata.ymax - gdata.ymin)*aratio
					}
					
				}
				else {
					if (gdata.fixAxisStretchCentrally == 'yes') {
						centre = (gdata.ymax + gdata.ymin)/2
						gdata.ymin = centre - ((gdata.xmax - gdata.xmin)*aratio/2)
						gdata.ymax = centre + ((gdata.xmax - gdata.xmin)*aratio/2)
					}
					else {
						gdata.ymax = gdata.ymin + (gdata.xmax - gdata.xmin)*aratio	
					}
					
				}
			}

			if (gdata.yaxisvisibility == 'yes') {
				var lineElement = gdata.yaxisElement
				lineElement.setAttribute('x1', graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) + '%');
				lineElement.setAttribute('y1', graphToScaledY(gdata.ymax, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('x2', graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) + '%')
				lineElement.setAttribute('y2', graphToScaledY(gdata.ymin, gdata.ymin, gdata.ymax, aratio) + '%');
				if (darkmode == false) {
					lineElement.style.stroke = gdata.yaxiscolor
				}
				else {
					lineElement.style.stroke = 'hsla(0, 0%, 100%, 1)'
				}
				gdata.yaxisElement = lineElement
			}

			if (gdata.xaxisvisibility == 'yes') {
				var lineElement = gdata.xaxisElement
				lineElement.setAttribute('x1', graphToScaledX(gdata.xmin, gdata.xmin, gdata.xmax, aratio) + '%');
				lineElement.setAttribute('y1', graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('x2', graphToScaledX(gdata.xmax, gdata.xmin, gdata.xmax, aratio) + '%')
				lineElement.setAttribute('y2', graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) + '%');
				if (darkmode == false) {
					lineElement.style.stroke = gdata.xaxiscolor
				}
				else {
					lineElement.style.stroke = 'hsla(0, 0%, 100%, 1)'
				}
				gdata.xaxisElement = lineElement
			}

			deleteSegments(gdata.xmajorgridElements)

			ticks = gdata.gridlinenumberX

			if (gdata.xmajorgridlinesvisibility == 'yes') {
				xmajortickvalues = gridtickvalues(gdata.xmin, gdata.xmax, ticks)
				gdata.xmajorgridElements = []
				for (m = 0; m < xmajortickvalues.length; m++) {
					ticklocation = xmajortickvalues[m]
					var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
					ylength = (gdata.ymax - gdata.ymin)
					if (gdata.xmajorgridlinesextension == 'yes') {
						lineElement.setAttribute('x1', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(gdata.ymin - (ylength)/2, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(gdata.ymax + (ylength)/2, gdata.ymin, gdata.ymax, aratio) + '%');
						
					}
					else {
						lineElement.setAttribute('x1', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(gdata.ymin, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(gdata.ymax, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('id', gdata.name + '-xmajorgridline-' + m)
					}
					if (darkmode == false) {
						lineElement.style.stroke = gdata.xmajorgridcolor
					}
					else {
						lineElement.style.stroke = 'hsla(0, 0%, 100%, 1)'
					}
					lineElement.setAttribute('id', gdata.name + '-xmajorgridline-' + m)	
					lineElement.style.strokeWidth = gdata.xmajorgridthickness + '%';
					gdata.xmajorgridElements.push(lineElement)
					svgElement.appendChild(lineElement);
				}
				gdata.xmajorgridticks = xmajortickvalues
			}

			deleteSegments(gdata.ymajorgridElements)

			ticks = gdata.gridlinenumberY

			if (gdata.ymajorgridlinesvisibility == 'yes') {
				ymajortickvalues = gridtickvalues(gdata.ymin, gdata.ymax, ticks)
				gdata.ymajorgridElements = []
				for (m = 0; m < ymajortickvalues.length; m++) {
					ticklocation = ymajortickvalues[m]
					var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
					xlength = (gdata.xmax - gdata.xmin)
					if (gdata.ymajorgridlinesextension == 'yes') {
						lineElement.setAttribute('x1', graphToScaledX((gdata.xmin) - xlength/2, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(gdata.xmax + (xlength/2), gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
					}
					else {
						lineElement.setAttribute('x1', graphToScaledX(gdata.xmin, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(gdata.xmax, gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
					}
					lineElement.setAttribute('id', gdata.name + '-ymajorgridline-' + m)
					if (darkmode == false) {
						lineElement.style.stroke = gdata.ymajorgridcolor
					}
					else {
						lineElement.style.stroke = 'hsla(0, 0%, 100%, 1)'
					}
					lineElement.setAttribute('id', gdata.name + '-ymajorgridline-' + m)
					lineElement.style.strokeWidth = gdata.ymajorgridthickness + '%';
					gdata.ymajorgridElements.push(lineElement)
					svgElement.appendChild(lineElement);
				}
				gdata.ymajorgridticks = ymajortickvalues
			}

			deleteSegments(gdata.ymajorlabelsElements)


			ticks = gdata.gridlinenumberY

			if (gdata.ymajorgridlabelvisibility == 'yes') {
				gdata.ymajorlabelsElements = []
				ymajortickvalues = gridtickvalues(gdata.ymin, gdata.ymax, ticks)
				scale = gdata.ymax - gdata.ymin
				expstring = scale.toExponential().toString()
				order = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
				labelylocationX = gdata.axislocationX
				if (graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) < 0) {
					labelylocationX = gdata.xmin
				}
				if (graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) > 100) {
					labelylocationX = gdata.xmax
				}
				for (m = gdata.ylabelexclusionsstart; m < ymajortickvalues.length - gdata.ylabelexclusionsend; m++) {
					ticklocation = ymajortickvalues[m]
					value = ticklocation
					if (eval(gdata.ymajorgridlabelOnlyIf)) {
					
						var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
						

						if(isInt(ticklocation)) {
							if (gdata.isComplexPlane == 'yes') {
								textElement.innerHTML = ticklocation + 'i'
							}
							else {
								textElement.innerHTML = ticklocation
							}
						}
						else {
							
							if (Math.abs(ticklocation) < 0.01 && order > 2) {
								ticklocation = ticklocation.toExponential(order)
									
							}
							else {
								ticklocation = ticklocation.toFixed(order + 1)
							}
							if (gdata.isComplexPlane == 'yes') {
								textElement.innerHTML = ticklocation + 'i'
							}
							else {
								textElement.innerHTML = ticklocation	
							}
							if(ticklocation == 0) {
								textElement.innerHTML = 0
							}

						}


						textElement.setAttribute('x', graphToScaledX(labelylocationX, gdata.xmin, gdata.xmax, aratio) + 0.5 + gdata.ymajorgridlabelshift + '%');
						textElement.setAttribute('y',graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + 0.5 + '%');
						textElement.setAttribute('id',gdata.name + '-yticklabel-' + m)
						textElement.style.fontSize = gdata.fontSize
						textElement.style.fontFamily = 'Source Sans Pro'
						textElement.style.userSelect = 'none'
						// textElement.setAttribute('text-anchor', 'middle')
						textElement.style.fill = gdata.ymajorgridlabelcolor
						if (darkmode == false) {
							textElement.style.fill = gdata.ymajorgridlabelcolor
						}
						else {
							textElement.style.fill = 'hsla(0, 0%, 100%, 1)'
						}	
						svgElement.appendChild(textElement);

						gdata.ymajorlabelsElements.push(textElement)
					}
					
				}
			}


			deleteSegments(gdata.xmajorlabelsElements)

			ticks = gdata.gridlinenumberX

			if (gdata.xmajorgridlabelvisibility == 'yes') {
				gdata.xmajorlabelsElements = []
				xmajortickvalues = gridtickvalues(gdata.xmin, gdata.xmax, ticks)
				scale = gdata.xmax - gdata.xmin
				expstring = scale.toExponential().toString()
				order = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
				
				labelxlocationY = gdata.axislocationY
				if (graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) < 0) {
					labelxlocationY = gdata.ymax
				}
				if (graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) > 100) {
					labelxlocationY = gdata.ymin
				}


				for (m = gdata.xlabelexclusionsstart; m < xmajortickvalues.length - gdata.xlabelexclusionsend; m++) {
					ticklocation = xmajortickvalues[m]

					value = ticklocation
					if (eval(gdata.xmajorgridlabelOnlyIf)) {

						var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');

						if(isInt(ticklocation)) {
							textElement.innerHTML = ticklocation
						}
						else {
							
							if (Math.abs(ticklocation) < 0.01 && order > 2) {
								ticklocation = ticklocation.toExponential(order)
								
								
							}
							else {
								ticklocation = ticklocation.toFixed(order + 1)
							}
							textElement.innerHTML = ticklocation	
							
							if(ticklocation == 0) {
								textElement.innerHTML = 0
							}

						}

						transformedXval = graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) - 1
						textElement.setAttribute('x', transformedXval + '%');
						transformedYval = graphToScaledY(labelxlocationY, gdata.ymin, gdata.ymax, aratio) + 2 + gdata.xmajorgridlabelshift
						textElement.setAttribute('y', transformedYval + '%');
						textElement.setAttribute('id',gdata.name + '-xticklabel-' + m)
						textElement.style.fontSize = gdata.fontSize
						textElement.style.userSelect = 'none'
						textElement.setAttribute('text-anchor', 'middle')
						if (parseFloat(order) >= 2) {
							textElement.setAttribute('transform', 'rotate(90, ' + transformedXval + ', ' + transformedYval + ')')	
						}
						textElement.style.fontFamily = 'Source Sans Pro'
						if (darkmode == false) {
							textElement.style.fill = gdata.xmajorgridlabelcolor
						}
						else {
							textElement.style.fill = 'hsla(0, 0%, 100%, 1)'
						}
						svgElement.appendChild(textElement);
						
						gdata.xmajorlabelsElements.push(textElement)
					}
					
				}
			}


			if (gdata.xaxislabelvisibility == 'yes') {
				var textElement = gdata.xaxislabelElement 
				textElement.setAttribute('x', graphToScaledX(gdata.xmax, gdata.xmin, gdata.xmax, aratio) + gdata.xaxislabelshift + '%');
				textElement.setAttribute('y',graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) + 1 + '%');
				gdata.xaxislabelElement = textElement
			}


			if (gdata.yaxislabelvisibility == 'yes') {
				var textElement = gdata.yaxislabelElement
				textElement.setAttribute('x', graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) + 0 + '%');
				textElement.setAttribute('y',graphToScaledY(gdata.ymax, gdata.ymin, gdata.ymax, aratio) - gdata.yaxislabelshift + '%');
				gdata.yaxislabelElement = textElement
				
			}


			for (var key in gdata.lineData) {
				lineElement = gdata.lineData[key][0]
				lineoptions = gdata.lineData[key][1]

				lineElement.setAttribute('x1', graphToScaledX(lineoptions.x1, gdata.xmin, gdata.xmax, aratio) + '%');
				lineElement.setAttribute('y1', graphToScaledY(lineoptions.y1, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('x2', graphToScaledX(lineoptions.x2, gdata.xmin, gdata.xmax, aratio) + '%')
				lineElement.setAttribute('y2', graphToScaledY(lineoptions.y2, gdata.ymin, gdata.ymax, aratio) + '%');
			}

			for (var key in gdata.circleData) {
				circleElement = gdata.circleData[key][0]
				circleoptions = gdata.circleData[key][1]
				rx = distanceBTWgraphToSvg([0,0],[circleoptions.radius, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
				ry = distanceBTWgraphToSvg([0,0],[0,circleoptions.radius], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
				circleElement.setAttribute('cx', graphToScaledX(circleoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
				circleElement.setAttribute('cy', graphToScaledY(circleoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
				circleElement.setAttribute('rx', rx + '%')
				circleElement.setAttribute('ry', ry + '%');
				
			}

			for (var key in gdata.pathData) {
				pathElement = gdata.pathData[key][0]
				pathoptions = gdata.pathData[key][1]
				pathstring = 'M'
				for (pth = 0; pth < pathoptions.points.length; pth++) {
					if (pth == 0) {
						pathstring = pathstring + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
					}
					else {
						pathstring = pathstring + 'L' + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
					}
				}
				pathElement.setAttribute('d', pathstring);

			}

			for (var key in gdata.ellipseData) {
				ellipseElement = gdata.ellipseData[key][0]
				ellipseoptions = gdata.ellipseData[key][1]
				rx = distanceBTWgraphToSvg([0,0],[ellipseoptions.rx, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
				ry = distanceBTWgraphToSvg([0,0],[0, ellipseoptions.ry], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
				ellipseElement.setAttribute('cx', graphToScaledX(ellipseoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
				ellipseElement.setAttribute('cy', graphToScaledY(ellipseoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
				ellipseElement.setAttribute('rx', rx + '%')
				ellipseElement.setAttribute('ry', ry + '%');
				
			}

			for (var key in gdata.textData) {
				textElement = gdata.textData[key][0]
				textoptions = gdata.textData[key][1]
				textElement.setAttribute('x', graphToScaledX(textoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
				textElement.setAttribute('y', graphToScaledY(textoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			
			}

			for (var key in gdata.rectData) {
				rectElement = gdata.rectData[key][0]
				rectoptions = gdata.rectData[key][1]
				
				
				rx = distanceBTWgraphToSvg([0,0],[rectoptions.w, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
				ry = distanceBTWgraphToSvg([0,0],[0, rectoptions.h], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
				
				rectElement.setAttribute('x', graphToScaledX(rectoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
				rectElement.setAttribute('y', graphToScaledY(rectoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
				rectElement.setAttribute('width', rx + '%')
				rectElement.setAttribute('height', ry + '%');
			}			

			for (var key in gdata.pointData) {
				pointElement = gdata.pointData[key][0]
				pointoptions = gdata.pointData[key][1]
				
				
				pointElement.setAttribute('cx', graphToScaledX(pointoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
				pointElement.setAttribute('cy', graphToScaledY(pointoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			}			
		}

		function addGraph(parentdiv, name, gdata) {
			gdata = gdata || {}

			gdata.name = name || 'graph' + Math.random().toString()

			if (gdata.axislocationX != 0) {
				gdata.axislocationX = gdata.axislocationX || 0
			}
			else {
				gdata.axislocationX = 0
			}
			if (gdata.axislocationY != 0) {
				gdata.axislocationY = gdata.axislocationY || 0
			}
			else {
				gdata.axislocationY = 0
			}
			if (gdata.xmin != 0) {
				gdata.xmin = gdata.xmin || -1
			}
			else {
				gdata.xmin = 0
			}
			if (gdata.xmax != 0) {
				gdata.xmax = gdata.xmax || -1
			}
			else {
				gdata.xmax = 0
			}
			if (gdata.ymin != 0) {
				gdata.ymin = gdata.ymin || -1
			}
			else {
				gdata.ymin = 0
			}
			if (gdata.ymax != 0) {
				gdata.ymax = gdata.ymax || -1
			}
			else {
				gdata.ymax = 0
			}

			gdata.unitAspectRatio = gdata.unitAspectRatio || 'no'
			gdata.fixAxis = gdata.fixAxis || 'yaxis'
			gdata.fixAxisStretchCentrally = gdata.fixAxisStretchCentrally || 'no'


			gdata.xaxisvisibility = gdata.xaxisvisibility || 'yes'
			gdata.yaxisvisibility = gdata.yaxisvisibility || 'yes'

			gdata.xaxislabelvisibility = gdata.xaxislabelvisibility || 'yes' 
			gdata.yaxislabelvisibility = gdata.yaxislabelvisibility || 'yes'
			
			gdata.xmajorgridlinesvisibility = gdata.xmajorgridlinesvisibility || 'yes'
			gdata.ymajorgridlinesvisibility = gdata.ymajorgridlinesvisibility || 'yes'

			gdata.position = gdata.position || 'absolute'

			var svgElement = document.createElementNS("http://www.w3.org/2000/svg", 'svg');
			svgElement.setAttribute('height',"100%");
			svgElement.setAttribute('width', '100%');
			svgElement.setAttribute('viewBox',"0 0 100 100")
			// svgElement.setAttribute('preserveAspectRatio',"none")
			svgElement.setAttribute('id', name)
			svgElement.style.position = gdata.position
			svgElement.style.left = '0%'
			svgElement.style.top = '0%'
			parentdiv.appendChild(svgElement)
			gdata.svgElement = svgElement
			gdata.parentElement = parentdiv

			gdata.fontSize = gdata.fontSize || 5

			gdata.gridlinenumberX = gdata.gridlinenumberX || 10
			gdata.gridlinenumberY = gdata.gridlinenumberY || 10

			

			gdata.parentW = parentdiv.getBoundingClientRect().width
			gdata.parentH = parentdiv.getBoundingClientRect().height

			aratio = gdata.parentW/gdata.parentH




			if (gdata.unitAspectRatio == 'yes') {
				if (gdata.fixAxis == 'yaxis') {
					if (gdata.fixAxisStretchCentrally == 'yes') {
						centre = (gdata.xmax + gdata.xmin)/2
						gdata.xmin = centre - ((gdata.ymax - gdata.ymin)*aratio/2)
						gdata.xmax = centre + ((gdata.ymax - gdata.ymin)*aratio/2)
					}
					else {
						gdata.xmax = gdata.xmin + (gdata.ymax - gdata.ymin)*aratio
					}
					
				}
				else {
					if (gdata.fixAxisStretchCentrally == 'yes') {
						centre = (gdata.ymax + gdata.ymin)/2
						gdata.ymin = centre - ((gdata.xmax - gdata.xmin)*aratio/2)
						gdata.ymax = centre + ((gdata.xmax - gdata.xmin)*aratio/2)
					}
					else {
						gdata.ymax = gdata.ymin + (gdata.xmax - gdata.xmin)*aratio	
					}
					
				}
			}



			if (darkmode) {
				gdata.yaxiscolor = gdata.yaxiscolor || 'hsla(0, 100%, 100%, 1)'			
				gdata.xaxiscolor = gdata.xaxiscolor || 'hsla(0, 100%, 100%, 1)'			
				gdata.xmajorgridlabelcolor = gdata.xmajorgridlabelcolor || 'hsla(0, 100%, 100%, 1)'
				gdata.ymajorgridlabelcolor = gdata.ymajorgridlabelcolor || 'hsla(0, 100%, 100%, 1)'
				gdata.xmajorgridcolor = gdata.xmajorgridcolor || 'hsla(0, 100%, 100%, 1)'
				gdata.ymajorgridcolor = gdata.ymajorgridcolor || 'hsla(0, 100%, 100%, 1)'
			}

			gdata.yaxisthickness = gdata.yaxisthickness || 0.5
			gdata.yaxiscolor = gdata.yaxiscolor || 'hsla(0, 50%, 0%, 1)'


			if (gdata.yaxisvisibility == 'yes') {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1', graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) + '%');
				lineElement.setAttribute('y1', graphToScaledY(gdata.ymax, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('vector-effect','non-scaling-stroke');
				lineElement.setAttribute('x2', graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) + '%')
				lineElement.setAttribute('y2', graphToScaledY(gdata.ymin, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('id', gdata.name + '-yaxis')
				lineElement.style.stroke = gdata.yaxiscolor
				lineElement.style.strokeWidth = gdata.yaxisthickness + '%';
				gdata.yaxisElement = lineElement
				svgElement.appendChild(lineElement);
			}

			gdata.xaxisthickness = gdata.xaxisthickness || 0.5
			gdata.xaxiscolor = gdata.xaxiscolor || 'hsla(0, 50%, 0%, 1)'

			
			if (gdata.xaxisvisibility == 'yes') {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1', graphToScaledX(gdata.xmin, gdata.xmin, gdata.xmax, aratio) + '%');
				lineElement.setAttribute('y1', graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('vector-effect','non-scaling-stroke');
				lineElement.setAttribute('x2', graphToScaledX(gdata.xmax, gdata.xmin, gdata.xmax, aratio) + '%')
				lineElement.setAttribute('y2', graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) + '%');
				lineElement.setAttribute('id', gdata.name + '-xaxis')
				lineElement.style.stroke = gdata.xaxiscolor
				lineElement.style.strokeWidth = gdata.xaxisthickness + '%';
				gdata.xaxisElement = lineElement
				svgElement.appendChild(lineElement);
			}


			gdata.xmajorgridcolor = gdata.xmajorgridcolor || 'hsla(190, 0%, 50%, 1)'
			gdata.xmajorgridthickness = gdata.xmajorgridthickness || 0.3

			gdata.xmajorgridlinesextension = gdata.xmajorgridlinesextension || 'yes'
			gdata.ymajorgridlinesextension = gdata.ymajorgridlinesextension || 'yes'

			ticks = gdata.gridlinenumberX
			
			if (gdata.xmajorgridlinesvisibility == 'yes') {
				xmajortickvalues = gridtickvalues(gdata.xmin, gdata.xmax, ticks)
				gdata.xmajorgridElements = []
				for (m = 0; m < xmajortickvalues.length; m++) {
					ticklocation = xmajortickvalues[m]
					var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
					ylength = (gdata.ymax - gdata.ymin)
					if (gdata.xmajorgridlinesextension == 'yes') {
						lineElement.setAttribute('x1', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(gdata.ymin - (ylength)/2, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(gdata.ymax + (ylength)/2, gdata.ymin, gdata.ymax, aratio) + '%');
						
					}
					else {
						lineElement.setAttribute('x1', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(gdata.ymin, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(gdata.ymax, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('id', gdata.name + '-xmajorgridline-' + m)
					}
					lineElement.setAttribute('id', gdata.name + '-xmajorgridline-' + m)
					lineElement.style.stroke = gdata.xmajorgridcolor
					lineElement.style.strokeWidth = gdata.xmajorgridthickness + '%';
					gdata.xmajorgridElements.push(lineElement)
					svgElement.appendChild(lineElement);
				}
				gdata.xmajorgridticks = xmajortickvalues
			}

			gdata.ymajorgridcolor = gdata.ymajorgridcolor || 'hsla(190, 0%, 50%, 1)'
			gdata.ymajorgridthickness = gdata.ymajorgridthickness || 0.3


			ticks = gdata.gridlinenumberY


			if (gdata.ymajorgridlinesvisibility == 'yes') {
				ymajortickvalues = gridtickvalues(gdata.ymin, gdata.ymax, ticks)
				gdata.ymajorgridElements = []
				for (m = 0; m < ymajortickvalues.length; m++) {
					ticklocation = ymajortickvalues[m]
					var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
					xlength = (gdata.xmax - gdata.xmin)
					if (gdata.ymajorgridlinesextension == 'yes') {
						lineElement.setAttribute('x1', graphToScaledX((gdata.xmin) - xlength/2, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(gdata.xmax + (xlength/2), gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
					}
					else {
						lineElement.setAttribute('x1', graphToScaledX(gdata.xmin, gdata.xmin, gdata.xmax, aratio) + '%');
						lineElement.setAttribute('y1', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
						lineElement.setAttribute('vector-effect','non-scaling-stroke');
						lineElement.setAttribute('x2', graphToScaledX(gdata.xmax, gdata.xmin, gdata.xmax, aratio) + '%')
						lineElement.setAttribute('y2', graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + '%');
					}
					lineElement.setAttribute('id', gdata.name + '-ymajorgridline-' + m)
					lineElement.style.stroke = gdata.ymajorgridcolor
					lineElement.style.strokeWidth = gdata.ymajorgridthickness + '%';
					gdata.ymajorgridElements.push(lineElement)
					svgElement.appendChild(lineElement);
				}
				gdata.ymajorgridticks = ymajortickvalues
			}

			

			gdata.ymajorgridlabelvisibility = gdata.ymajorgridlabelvisibility || 'yes'
			gdata.ymajorgridlabelcolor = gdata.ymajorgridlabelcolor || 'hsla(190, 0%, 50%, 1)'


			gdata.ymajorgridlabelshift = gdata.ymajorgridlabelshift || 0.1
			gdata.xmajorgridlabelshift = gdata.xmajorgridlabelshift || 0.1

			gdata.xmajorgridlabelvisibility = gdata.xmajorgridlabelvisibility || 'yes'
			gdata.xmajorgridlabelcolor = gdata.xmajorgridlabelcolor || 'hsla(190, 0%, 50%, 1)'

			if (darkmode) {
				gdata.ymajorgridlabelcolor = gdata.ymajorgridlabelcolor || 'hsla(190, 100%, 50%, 1)'
				gdata.xmajorgridlabelcolor = gdata.xmajorgridlabelcolor || 'hsla(190, 100%, 50%, 1)'

			}
			else {
				gdata.ymajorgridlabelcolor = gdata.ymajorgridlabelcolor || 'hsla(190, 0%, 50%, 1)'
				gdata.xmajorgridlabelcolor = gdata.xmajorgridlabelcolor || 'hsla(190, 0%, 50%, 1)'
			}





			gdata.xlabelexclusionsstart = gdata.xlabelexclusionsstart || 0
			gdata.xlabelexclusionsend = gdata.xlabelexclusionsend || 0

			gdata.ylabelexclusionsstart = gdata.ylabelexclusionsstart || 0
			gdata.ylabelexclusionsend = gdata.ylabelexclusionsend || 0


			gdata.isComplexPlane = gdata.isComplexPlane || 'no'

			gdata.ymajorgridlabelOnlyIf = gdata.ymajorgridlabelOnlyIf || 'true'


			if (gdata.ymajorgridlabelvisibility == 'yes') {
				gdata.ymajorlabelsElements = []
				ymajortickvalues = gridtickvalues(gdata.ymin, gdata.ymax, ticks)
				labelylocationX = gdata.axislocationX
				if (graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) < 0) {
					labelylocationX = gdata.xmin
				}
				if (graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) > 100) {
					labelylocationX = gdata.xmax
				}
				for (m = gdata.ylabelexclusionsstart; m < ymajortickvalues.length - gdata.ylabelexclusionsend; m++) {
					ticklocation = ymajortickvalues[m]
					value = ticklocation
					if (eval(gdata.ymajorgridlabelOnlyIf)) {
						var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
						
						if(isInt(ticklocation)) {
							if (gdata.isComplexPlane == 'yes') {
								textElement.innerHTML = ticklocation + 'i'
							}
							else {
								textElement.innerHTML = ticklocation
								if(ticklocation == 0) {
									textElement.innerHTML = 0
								}
								
							}
						}
						else {

							expstring = ticklocation.toExponential().toString()
							order = (expstring.slice(expstring
								.indexOf('e') + 1)*(-1))
							if (parseFloat(order) < -1) {
								ticklocation = ticklocation.toExponential(0)	
							}
							else {
								ticklocation = ticklocation.toFixed(2)
							}
							textElement.innerHTML = ticklocation
							if(ticklocation == 0) {
								textElement.innerHTML = 0
							}
							if (gdata.isComplexPlane == 'yes') {
								textElement.innerHTML = ticklocation + 'i'
							}

						}



						textElement.setAttribute('x', graphToScaledX(labelylocationX, gdata.xmin, gdata.xmax, aratio) + 0.5 + gdata.ymajorgridlabelshift + '%');
						textElement.setAttribute('y',graphToScaledY(ticklocation, gdata.ymin, gdata.ymax, aratio) + 0.5 + '%');
						textElement.setAttribute('id', gdata.name + '-yticklabel-' + m)
						textElement.style.fontSize = gdata.fontSize
						textElement.style.userSelect = 'none'
						textElement.style.fontFamily = 'Source Sans Pro'
						textElement.style.fill = gdata.ymajorgridlabelcolor
						svgElement.appendChild(textElement);
						gdata.ymajorlabelsElements.push(textElement)
					}
					
				}
			}

			ticks = gdata.gridlinenumberX

			gdata.xmajorgridlabelOnlyIf = gdata.xmajorgridlabelOnlyIf || 'true'


			if (gdata.xmajorgridlabelvisibility == 'yes') {
				gdata.xmajorlabelsElements = []
				xmajortickvalues = gridtickvalues(gdata.xmin, gdata.xmax, ticks)
				labelxlocationY = gdata.axislocationY
				if (graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) < 0) {
					labelxlocationY = gdata.ymin
				}
				if (graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) > 100) {
					labelxlocationY = gdata.ymax
				}


				for (m = gdata.xlabelexclusionsstart; m < xmajortickvalues.length - gdata.xlabelexclusionsend; m++) {
					ticklocation = xmajortickvalues[m]
					value = ticklocation
					if (eval(gdata.xmajorgridlabelOnlyIf)) {
						var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');

						if(isInt(ticklocation)) {
							textElement.innerHTML = ticklocation
						}
						else {

							expstring = ticklocation.toExponential().toString()
							order = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
							if (parseFloat(order) < -1) {
								ticklocation = ticklocation.toExponential(0)	
							}
							else {
								ticklocation = ticklocation.toFixed(2)
							}
							textElement.innerHTML = ticklocation
							if(ticklocation == 0) {
								textElement.innerHTML = 0
							}

						}

						textElement.setAttribute('x', graphToScaledX(ticklocation, gdata.xmin, gdata.xmax, aratio) - 1 + '%');
						textElement.setAttribute('y',graphToScaledY(labelxlocationY, gdata.ymin, gdata.ymax, aratio) + 2 + gdata.xmajorgridlabelshift + '%');
						textElement.setAttribute('id', gdata.name + '-xticklabel-' + m)
						textElement.style.fontSize = gdata.fontSize
						textElement.style.fontFamily = 'Source Sans Pro'
						textElement.style.userSelect = 'none'
						textElement.style.fill = gdata.xmajorgridlabelcolor
						svgElement.appendChild(textElement);
						
						gdata.xmajorlabelsElements.push(textElement)
					}
					
				}
			}


			gdata.xaxislabel = gdata.xaxislabel || 'x axis'
			gdata.yaxislabel = gdata.yaxislabel || 'y axis'

			gdata.xaxislabelshift = gdata.xaxislabelshift || 2
			gdata.yaxislabelshift = gdata.yaxislabelshift || 2

			if (darkmode) {
				gdata.yaxislabelcolor = gdata.yaxislabelcolor || 'hsla(190, 100%, 100%, 1)'
				gdata.xaxislabelcolor = gdata.xaxislabelcolor || 'hsla(190, 100%, 100%, 1)'
			}
			else {
				gdata.yaxislabelcolor = gdata.yaxislabelcolor || 'hsla(190, 0%, 0%, 1)'
				gdata.xaxislabelcolor = gdata.xaxislabelcolor || 'hsla(190, 0%, 0%, 1)'
			}
			


			if (gdata.xaxislabelvisibility == 'yes') {
				var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
				textElement.innerHTML = gdata.xaxislabel 
				textElement.setAttribute('x', graphToScaledX(gdata.xmax, gdata.xmin, gdata.xmax, aratio) + gdata.xaxislabelshift + '%');
				textElement.setAttribute('y',graphToScaledY(gdata.axislocationY, gdata.ymin, gdata.ymax, aratio) + 1 + '%');
				textElement.setAttribute('id', name + '-xaxislabel')
				textElement.style.fontSize = gdata.fontSize
				textElement.style.color = gdata.xaxislabelcolor
				textElement.style.fontFamily = 'Source Sans Pro'
				
				svgElement.appendChild(textElement);
				gdata.xaxislabelElement = textElement
				
			}


			if (gdata.yaxislabelvisibility == 'yes') {
				var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
				textElement.innerHTML = gdata.yaxislabel 
				textElement.setAttribute('x', graphToScaledX(gdata.axislocationX, gdata.xmin, gdata.xmax, aratio) + 0 + '%');
				textElement.setAttribute('y',graphToScaledY(gdata.ymax, gdata.ymin, gdata.ymax, aratio) - gdata.yaxislabelshift + '%');
				textElement.setAttribute('id',name + '-yaxislabel')
				textElement.style.fontSize = gdata.fontSize
				textElement.style.color = gdata.yaxislabelcolor
				textElement.style.fontFamily = 'Source Sans Pro'
				
				svgElement.appendChild(textElement);
				gdata.yaxislabelElement = textElement
				
			}

			gdata.scrollZoom = gdata.scrollZoom || 'yes'

			if (gdata.scrollZoom == 'yes') {
				svgElement.addEventListener('wheel', wheelHandle)
			}

			svgPTVariable[name] = svgElement.createSVGPoint()

			gdata.draggability = gdata.draggability || 'no'
			if (gdata.draggability == 'yes') {
				gdata.currentlyDraggableGraph = gdata.currentlyDraggableGraph || 'yes'
			}
			else {
				gdata.currentlyDraggableGraph = gdata.currentlyDraggableGraph || 'no'
			}
			gdata.runFunctionOnDragEnd = gdata.runFunctionOnDragEnd || ''
			gdata.runFunctionDuringDrag = gdata.runFunctionDuringDrag || ''

			if (gdata.draggability == 'yes') {
				svgElement.addEventListener('mousedown', graphDragHandle)
				svgElement.addEventListener('touchstart', graphDragHandle)
			}
			else {
				svgElement.addEventListener('touchmove', graphTouchDisable)
			}

			if (gdata.draggability != 'yes' && gdata.scrollZoom != 'yes') {
				svgElement.style.pointerEvents = 'none'
			}

			gdata.dragDirection = gdata.dragDirection || 'bothXY'
			gdata.dragIfCondition = gdata.dragIfCondition || 'true'


			gdata.lineData = {}
			gdata.circleData = {}
			gdata.pointData = {}
			gdata.ellipseData = {}
			gdata.rectData = {}
			gdata.textData = {}
			gdata.pathData = {}
			gdata.sliderData = {}

			gdata.aspectratio = aratio


			graphData[name] = gdata
			return gdata;
		}

		function getGraphCursorLocation(cursorpercent, graphname) {
			gdata = graphData[graphname]

			graphEl = document.getElementById(gdata.name)

			valx = svgToGraphX(cursorpercent[0], gdata.xmin, gdata.xmax, gdata.aspectratio)
			valy = svgToGraphY(cursorpercent[1], gdata.ymin, gdata.ymax, gdata.aspectratio)

			return [valx, valy]
		}

		function addLine(graphname, linename, lineoptions) {
			gdata = graphData[graphname]
			lineoptions = lineoptions || {}

			aratio = gdata.aspectratio

			lineoptions.x1 = parseFloat(lineoptions.x1.toString() || 0)
			lineoptions.y1 = parseFloat(lineoptions.y1.toString() || 0)
			lineoptions.x2 = parseFloat(lineoptions.x2.toString() || 0.5)
			lineoptions.y2 = parseFloat(lineoptions.y2.toString() || 0.5)
			lineoptions.name = linename || uid

			lineoptions.strokedasharray = lineoptions.strokedasharray || ""
			lineoptions.strokewidth = lineoptions.strokewidth || 1
			lineoptions.linecolor = lineoptions.linecolor || 'hsla(190, 100%, 50%, 1)'

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', graphToScaledX(lineoptions.x1, gdata.xmin, gdata.xmax, aratio) + '%');
			lineElement.setAttribute('y1', graphToScaledY(lineoptions.y1, gdata.ymin, gdata.ymax, aratio) + '%');
			lineElement.setAttribute('x2', graphToScaledX(lineoptions.x2, gdata.xmin, gdata.xmax, aratio) + '%')
			lineElement.setAttribute('y2', graphToScaledY(lineoptions.y2, gdata.ymin, gdata.ymax, aratio) + '%');
			lineElement.setAttribute('stroke-dasharray', lineoptions.strokedasharray);
			
			lineElement.setAttribute('id', graphname + '-line-' + linename)
			uid = uid + 1
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.style.stroke = lineoptions.linecolor
			lineElement.style.strokeWidth = lineoptions.strokewidth + '%';
			gdata.svgElement.appendChild(lineElement);

			graphData[graphname].lineData[linename] = [lineElement, lineoptions]
			return [lineElement, lineoptions]
		}

		function addSlider(graphname, slidername, slideroptions) {
			gdata = graphData[graphname]
			slideroptions = slideroptions || {}

			aratio = gdata.aspectratio

			slideroptions.x1 = parseFloat(slideroptions.x1.toString() || 0)
			slideroptions.y1 = parseFloat(slideroptions.y1.toString() || 0)
			slideroptions.x2 = parseFloat(slideroptions.x2.toString() || 0.5)
			slideroptions.y2 = parseFloat(slideroptions.y2.toString() || 0.5)
			slideroptions.name = slidername || uid

			slideroptions.automaticallySetKnobRadius

			slideroptions.currentvalue = parseFloat(slideroptions.currentvalue.toString() || 0.5)
			slideroptions.maxvalue = parseFloat(slideroptions.maxvalue.toString() || 0.5)
			slideroptions.minvalue = parseFloat(slideroptions.minvalue.toString() || 0.5)

			slideroptions.strokewidth = slideroptions.strokewidth || 1
			slideroptions.sliderfillcolor = slideroptions.sliderfillcolor || 'hsla(190, 100%, 50%, 1)'
			slideroptions.sliderbasecolor = slideroptions.sliderbasecolor || 'hsla(190, 0%, 70%, 1)'
			slideroptions.sliderknobcolor = slideroptions.sliderknobcolor || 'hsla(190, 100%, 50%, 1)'

			slideroptions.knobradius = parseFloat(slideroptions.knobradius || 0.5)

			kfactor = (slideroptions.currentvalue - slideroptions.minvalue)/(slideroptions.maxvalue - slideroptions.minvalue)

			slideroptions.cx = ((slideroptions.x2*kfactor) + slideroptions.x1)/(kfactor + 1)
			slideroptions.cy = ((slideroptions.y2*kfactor) + slideroptions.y1)/(kfactor + 1)

			slideroptions.cx = parseFloat(slideroptions.cx.toString() || 0)
			slideroptions.cy = parseFloat(slideroptions.cy.toString() || 0)

			var sliderbaseElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			sliderbaseElement.setAttribute('x1', graphToScaledX(slideroptions.x1, gdata.xmin, gdata.xmax, aratio) + '%');
			sliderbaseElement.setAttribute('y1', graphToScaledY(slideroptions.y1, gdata.ymin, gdata.ymax, aratio) + '%');
			sliderbaseElement.setAttribute('x2', graphToScaledX(slideroptions.x2, gdata.xmin, gdata.xmax, aratio) + '%')
			sliderbaseElement.setAttribute('y2', graphToScaledY(slideroptions.y2, gdata.ymin, gdata.ymax, aratio) + '%');
			
			sliderbaseElement.setAttribute('id', graphname + '-slider-base-' + slidername)
			sliderbaseElement.setAttribute('vector-effect','non-scaling-stroke');
			sliderbaseElement.style.stroke = slideroptions.sliderbasecolor
			sliderbaseElement.style.strokeWidth = slideroptions.strokewidth + '%';
			gdata.svgElement.appendChild(sliderbaseElement);

			var sliderfillElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			sliderfillElement.setAttribute('x1', graphToScaledX(slideroptions.x1, gdata.xmin, gdata.xmax, aratio) + '%');
			sliderfillElement.setAttribute('y1', graphToScaledY(slideroptions.y1, gdata.ymin, gdata.ymax, aratio) + '%');
			sliderfillElement.setAttribute('x2', graphToScaledX(slideroptions.cx, gdata.xmin, gdata.xmax, aratio) + '%')
			sliderfillElement.setAttribute('y2', graphToScaledY(slideroptions.cy, gdata.ymin, gdata.ymax, aratio) + '%');
			
			sliderfillElement.setAttribute('id', graphname + '-slider-fill-' + slidername)
			sliderfillElement.setAttribute('vector-effect','non-scaling-stroke');
			sliderfillElement.style.stroke = slideroptions.sliderfillcolor
			sliderfillElement.style.strokeWidth = slideroptions.strokewidth + '%';
			gdata.svgElement.appendChild(sliderfillElement);

			rx = distanceBTWgraphToSvg([0,0],[slideroptions.knobradius, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, slideroptions.knobradius], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)

			slideroptions.automaticallySetKnobRadius = slideroptions.automaticallySetKnobRadius || 'yes'

			if (slideroptions.automaticallySetKnobRadius == 'yes') {
				// Adjusted based on certain calculations at https://www.desmos.com/calculator/wocvdzcn1p 
				aRegress = -1.2979*Math.pow(10, -9);
				bRegress = -9.8036
				cRegress = -0.0337978
				fRegress = 10.1808

				strokeW = options.strokewidth
				if (strokeW < 25) {
					rx = ((aRegress*strokeW) + bRegress)*(Math.exp(cRegress*strokeW)) + fRegress
					ry = rx
				}
				else {
					rx = 0.2217*strokeW + 0.736503
					ry = rx
				}
			}

				
			
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
			circleElement.setAttribute('cx', graphToScaledX(slideroptions.cx, gdata.xmin, gdata.xmax, aratio) + '%');
			circleElement.setAttribute('cy', graphToScaledY(slideroptions.cy, gdata.ymin, gdata.ymax, aratio) + '%');
			circleElement.setAttribute('rx', rx + '%')
			circleElement.setAttribute('ry', ry + '%');
			circleElement.setAttribute('id', graphname + '-slider-knob-' + slidername)
			uid = uid + 1
			circleElement.setAttribute('vector-effect','non-scaling-stroke');
			circleElement.style.fill = slideroptions.sliderknobcolor
			circleElement.style.strokeWidth = '0%';
			gdata.svgElement.appendChild(circleElement);

			graphData[graphname].sliderData[slidername] = [sliderbaseElement,sliderfillElement, circleElement, slideroptions]
			return [sliderbaseElement,sliderfillElement, circleElement, slideroptions]
		}

		sliderDivData = {}

		function addSliderToDiv(holderName, slidername, slideroptions) {
			slideroptions = slideroptions || {}

			slideroptions.classname = slideroptions.classname || 'standardSlider'

			var sliderinputElement = document.createElement("input");
			sliderinputElement.type = 'range';
			sliderinputElement.setAttribute('min', slideroptions.min);
			sliderinputElement.setAttribute('max', slideroptions.max);
			sliderinputElement.setAttribute('step', slideroptions.step);
			sliderinputElement.setAttribute('value', slideroptions.value);
			sliderinputElement.setAttribute('id', slidername);
			sliderinputElement.setAttribute('class', slideroptions.classname);
			sliderinputElement.setAttribute('oninput', slideroptions.eventFunction);

			holderDiv = document.getElementById(holderName)

			holderDiv.appendChild(sliderinputElement);

			sliderinputElement.style.width = slideroptions.w;
			sliderinputElement.style.height = slideroptions.h;
			sliderinputElement.style.backgroundColor = slideroptions.sliderbasecolor

			sliderDivData[slidername] = [holderDiv, slidername, slideroptions]
			return [slidername, holderDiv]
		}

		function divSlider(holder, divslidername, minval, maxval, currvalue, stepval, eventfunc, widthval, heightval, sliderTrackColor, thumbSize, thumbColor) {
			options = {}
			options.min = minval
			options.max = maxval
			options.value = currvalue
			options.step = stepval
			options.eventFunction = eventfunc
			options.w = widthval
			options.h = heightval
			options.sliderbasecolor = sliderTrackColor
			// options.classname = sliderClass


			$('<style>#' + divslidername + '::-webkit-slider-thumb {-webkit-appearance: none; appearance: none;width: ' + thumbSize + ';height: ' + thumbSize + ';border-radius: 50%; background: ' + thumbColor + ';cursor: pointer; }  #' + divslidername + '::-moz-slider-thumb {appearance: none;width: ' + thumbSize + ';height: ' + thumbSize + ';border-radius: 50%; background: ' + thumbColor + ';cursor: pointer; }</style>').appendTo('head');

			addSliderToDiv(holder, divslidername, options)
		}

		function addPath(graphname, pathname, pathoptions) {
			gdata = graphData[graphname]
			pathoptions = pathoptions || {}

			aratio = gdata.aspectratio

			pathoptions.points = pathoptions.points || [[0, 1], [1, 0]]

			pathstring = 'M'

			for (pth = 0; pth < pathoptions.points.length; pth++) {
				if (pth == 0) {
					pathstring = pathstring + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
				}
				else {
					pathstring = pathstring + 'L' + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
				}
				
			}

			

			pathoptions.name = pathname || uid
			// console.log((0).toString() || 0.5)

			pathoptions.strokewidth = pathoptions.strokewidth || 1
			pathoptions.pathcolor = pathoptions.pathcolor || 'hsla(190, 100%, 50%, 1)'

			var pathElement = document.createElementNS("http://www.w3.org/2000/svg", 'path');
			try {
				pathElement.setAttribute('d', pathstring);
				pathElement.setAttribute('id', graphname + '-path-' + pathname)
				pathElement.setAttribute('stroke-dasharray', pathoptions.strokedasharray);
				uid = uid + 1
				pathElement.style.stroke = pathoptions.pathcolor
				pathElement.style.fill = 'none'
				pathElement.style.strokeWidth = pathoptions.strokewidth + '%';
				gdata.svgElement.appendChild(pathElement);

				graphData[graphname].pathData[pathname] = [pathElement, pathoptions]
				return [pathElement, pathoptions]
			}
			catch (err){
				console.log(pathoptions.points)
			}
				
		}

		function updatePath(graphname, pathname, newpathoptions) {

			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			pathoptions = gdata.pathData[pathname][1]
			pathElement = gdata.pathData[pathname][0]



			pathoptions.points = newpathoptions.points || pathoptions.points

			pathstring = 'M'

			for (pth = 0; pth < pathoptions.points.length; pth++) {
				if (pth == 0) {
					pathstring = pathstring + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
				}
				else {
					pathstring = pathstring + 'L' + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
				}
				
			}


			try {
				pathElement.setAttribute('d', pathstring);
				pathoptions.strokewidth = newpathoptions.strokewidth || pathoptions.strokewidth
				pathoptions.pathcolor = newpathoptions.pathcolor || pathoptions.pathcolor

				pathElement.style.stroke = pathoptions.pathcolor
				pathElement.style.fill = 'none'
				pathElement.style.strokeWidth = pathoptions.strokewidth + '%';
				
				graphData[graphname].pathData[pathname] = [pathElement, pathoptions]
			}

			catch (err){
				console.log(newpathoptions.points)
			}
				
		}

		function updatePathPoints(graphname, pathname, npathpoints) {
			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			pathoptions = gdata.pathData[pathname][1]
			pathElement = gdata.pathData[pathname][0]

			pathoptions.points = npathpoints || pathoptions.points

			if (pathoptions.points.length > 0) {
				pathstring = 'M'

				for (pth = 0; pth < pathoptions.points.length; pth++) {
					if (pth == 0) {
						pathstring = pathstring + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
					}
					else {
						pathstring = pathstring + 'L' + graphToScaledX(pathoptions.points[pth][0], gdata.xmin, gdata.xmax, aratio) + ' ' + graphToScaledY(pathoptions.points[pth][1], gdata.ymin, gdata.ymax, aratio) + ' '
					}
					
				}

				try {
					pathElement.setAttribute('d', pathstring);
					graphData[graphname].pathData[pathname] = [pathElement, pathoptions]
					return [pathElement, pathoptions]
				}
				catch (err){
					console.log(npathpoints)
				}
			}
			
		}

		function updateLine(graphname, linename, linevalues) {

			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			lineoptions = gdata.lineData[linename][1]
			lineElement = gdata.lineData[linename][0]
			
			if (linevalues.x1 != 0) {
				lineoptions.x1 = linevalues.x1 || lineoptions.x1	
			}
			else {
				lineoptions.x1 = linevalues.x1
			}


			if (linevalues.y1 != 0) {
				lineoptions.y1 = linevalues.y1 || lineoptions.y1	
			}
			else {
				lineoptions.y1 = linevalues.y1
			}


			if (linevalues.x2 != 0) {
				lineoptions.x2 = linevalues.x2 || lineoptions.x2	
			}
			else {
				lineoptions.x2 = linevalues.x2
			}


			if (linevalues.y2 != 0) {
				lineoptions.y2 = linevalues.y2 || lineoptions.y2	
			}
			else {
				lineoptions.y2 = linevalues.y2
			}

			lineoptions.strokedasharray = linevalues.strokedasharray || lineoptions.strokedasharray
			lineoptions.strokewidth = linevalues.strokewidth || lineoptions.strokewidth
			lineoptions.linecolor = linevalues.linecolor || lineoptions.linecolor

			lineElement.setAttribute('x1', graphToScaledX(lineoptions.x1, gdata.xmin, gdata.xmax, aratio) + '%');
			lineElement.setAttribute('y1', graphToScaledY(lineoptions.y1, gdata.ymin, gdata.ymax, aratio) + '%');
			lineElement.setAttribute('x2', graphToScaledX(lineoptions.x2, gdata.xmin, gdata.xmax, aratio) + '%')
			lineElement.setAttribute('y2', graphToScaledY(lineoptions.y2, gdata.ymin, gdata.ymax, aratio) + '%');

			lineElement.setAttribute('stroke-dasharray', lineoptions.strokedasharray);
			lineElement.style.stroke = lineoptions.linecolor
			lineElement.style.strokeWidth = lineoptions.strokewidth + '%';
			
			graphData[graphname].lineData[linename] = [lineElement, lineoptions]
		}

		function distanceBTWgraphToSvg(p1, p2, xmin, xmax, ymin, ymax, aspectratio) {
			pt1 = [graphToScaledX(p1[0], xmin, xmax, aspectratio), graphToScaledY(p1[1], ymin, ymax, aspectratio)]
			pt2 = [graphToScaledX(p2[0], xmin, xmax, aspectratio), graphToScaledY(p2[1], ymin, ymax, aspectratio)]

			return Math.pow(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2), 0.5)
		}

		function addCircle(graphname, circlename, circleoptions) {
			gdata = graphData[graphname]
			circleoptions = circleoptions || {}
			aratio = gdata.aspectratio

			if (circleoptions.x != 0) {
				circleoptions.x = circleoptions.x || 0.3
			}
			else {
				circleoptions.x = 0
			}

			if (circleoptions.y != 0) {
				circleoptions.y = circleoptions.y || 0.3
			}
			else {
				circleoptions.y = 0
			}

			if (circleoptions.radius != 0) {
				circleoptions.radius = circleoptions.radius || 0.3
			}
			else {
				circleoptions.radius = 0
			}

			circleoptions.name = circlename || uid

			circleoptions.stroke = circleoptions.stroke || 'hsla(190, 100%, 50%, 0.5)'
			circleoptions.strokewidth = circleoptions.strokewidth || 0.1
			
			circleoptions.circlecolor = circleoptions.circlecolor || 'hsla(190, 100%, 50%, 1)'

			rx = distanceBTWgraphToSvg([0,0],[circleoptions.radius, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, circleoptions.radius], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
			circleElement.setAttribute('cx', graphToScaledX(circleoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			circleElement.setAttribute('cy', graphToScaledY(circleoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			circleElement.setAttribute('rx', rx + '%')
			circleElement.setAttribute('ry', ry + '%');
			circleElement.setAttribute('id', graphname + '-circle-' + circlename)
			uid = uid + 1
			circleElement.setAttribute('vector-effect','non-scaling-stroke');
			circleElement.style.fill = circleoptions.circlecolor
			circleElement.style.strokeWidth = circleoptions.strokewidth + '%';
			circleElement.style.stroke = circleoptions.stroke;
			circleElement.setAttribute('stroke-dasharray', circleoptions.strokedasharray);
			gdata.svgElement.appendChild(circleElement);

			graphData[graphname].circleData[circlename] = [circleElement, circleoptions]
			return [circleElement, circleoptions]
		}

		function updateCircle(graphname, circlename, circlenewvalues) {

			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			circleoptions = gdata.circleData[circlename][1]
			circleElement = gdata.circleData[circlename][0]


			if (circleoptions.x != 0) {
				circleoptions.x = circlenewvalues.x || circleoptions.x
			}
			else {
				circleoptions.x = circlenewvalues.x
			}

			if (circleoptions.y != 0) {
				circleoptions.y = circlenewvalues.y || circleoptions.y
			}
			else {
				circleoptions.y = circlenewvalues.y
			}

			if (circleoptions.radius != 0) {
				circleoptions.radius = circlenewvalues.radius || circleoptions.radius
			}
			else {
				circleoptions.radius = circlenewvalues.radius
			}

			circleoptions.name = circlename || uid

			circleoptions.stroke = circlenewvalues.stroke || circleoptions.stroke
			circleoptions.strokewidth = circlenewvalues.strokewidth || circleoptions.strokewidth
			
			circleoptions.circlecolor = circlenewvalues.circlecolor || circleoptions.circlecolor

			rx = distanceBTWgraphToSvg([0,0],[circleoptions.radius, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, circleoptions.radius], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			
			circleElement.setAttribute('cx', graphToScaledX(circleoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			circleElement.setAttribute('cy', graphToScaledY(circleoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			circleElement.setAttribute('rx', rx + '%')
			circleElement.setAttribute('ry', ry + '%');
			circleElement.setAttribute('id', graphname + '-circle-' + circlename)
			uid = uid + 1
			circleElement.setAttribute('vector-effect','non-scaling-stroke');
			circleElement.style.fill = circleoptions.circlecolor
			circleElement.style.strokeWidth = circleoptions.strokewidth + '%';
			circleElement.style.stroke = circleoptions.stroke;
			circleElement.setAttribute('stroke-dasharray', circleoptions.strokedasharray);
			
			graphData[graphname].circleData[circlename] = [circleElement, circleoptions]
		}

		function addEllipse(graphname, ellipsename, ellipseoptions) {
			gdata = graphData[graphname]

			aratio = gdata.aspectratio

			ellipseoptions = ellipseoptions || {}

			ellipseoptions.x = parseFloat(ellipseoptions.x.toString() || 0)
			ellipseoptions.y = parseFloat(ellipseoptions.y.toString() || 0)
			ellipseoptions.rx = parseFloat(ellipseoptions.rx.toString() || 0.3)
			ellipseoptions.ry = parseFloat(ellipseoptions.ry.toString() || 8)
			ellipseoptions.name = ellipsename || uid

			ellipseoptions.stroke = ellipseoptions.stroke || 'hsla(190, 100%, 50%, 0.5)'
			ellipseoptions.strokewidth = ellipseoptions.strokewidth || 0.1
			
			ellipseoptions.ellipsecolor = ellipseoptions.ellipsecolor || 'hsla(190, 100%, 50%, 1)'

			rx = distanceBTWgraphToSvg([0,0],[ellipseoptions.rx, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, ellipseoptions.ry], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			
			var ellipseElement = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
			ellipseElement.setAttribute('cx', graphToScaledX(ellipseoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			ellipseElement.setAttribute('cy', graphToScaledY(ellipseoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			ellipseElement.setAttribute('rx', rx + '%')
			ellipseElement.setAttribute('ry', ry + '%');
			ellipseElement.setAttribute('id', graphname + '-ellipse-' + ellipsename)
			uid = uid + 1
			ellipseElement.setAttribute('vector-effect','non-scaling-stroke');
			ellipseElement.style.fill = ellipseoptions.ellipsecolor
			ellipseElement.style.strokeWidth = ellipseoptions.strokewidth + '%';
			ellipseElement.style.stroke = ellipseoptions.stroke;
			gdata.svgElement.appendChild(ellipseElement);

			graphData[graphname].ellipseData[ellipsename] = [ellipseElement, ellipseoptions]
			return [ellipseElement, ellipseoptions]
		}

		function updateEllipse(graphname, ellipsename, ellipsenewvalues) {
			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			ellipseoptions = gdata.ellipseData[ellipsename][1]
			ellipseElement = gdata.ellipseData[ellipsename][0]

			if (ellipseoptions.x != 0) {
				ellipseoptions.x = ellipsenewvalues.x || ellipseoptions.x
			}
			else {
				ellipseoptions.x = 0
			}

			if (ellipseoptions.y != 0) {
				ellipseoptions.y = ellipsenewvalues.y || ellipseoptions.y
			}
			else {
				ellipseoptions.y = 0
			}

			if (ellipseoptions.rx != 0) {
				ellipseoptions.rx = ellipsenewvalues.rx || ellipseoptions.rx
			}
			else {
				ellipseoptions.rx = 0
			}
			if (ellipseoptions.ry != 0) {
				ellipseoptions.ry = ellipsenewvalues.ry || ellipseoptions.ry
			}
			else {
				ellipseoptions.ry = 0
			}

			ellipseoptions.name = ellipsename || uid

			ellipseoptions.stroke = ellipsenewvalues.stroke || ellipseoptions.stroke
			ellipseoptions.strokewidth = ellipsenewvalues.strokewidth || ellipseoptions.strokewidth
			
			ellipseoptions.ellipsecolor = ellipsenewvalues.ellipsecolor || ellipseoptions.ellipsecolor

			rx = distanceBTWgraphToSvg([0,0],[ellipseoptions.rx, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, ellipseoptions.ry], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			
			ellipseElement.setAttribute('cx', graphToScaledX(ellipseoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			ellipseElement.setAttribute('cy', graphToScaledY(ellipseoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			ellipseElement.setAttribute('rx', rx + '%')
			ellipseElement.setAttribute('ry', ry + '%');
			ellipseElement.setAttribute('id', graphname + '-ellipse-' + ellipsename)
			uid = uid + 1
			ellipseElement.setAttribute('vector-effect','non-scaling-stroke');
			ellipseElement.style.fill = ellipseoptions.ellipsecolor
			ellipseElement.style.strokeWidth = ellipseoptions.strokewidth + '%';
			ellipseElement.style.stroke = ellipseoptions.stroke;
			gdata.svgElement.appendChild(ellipseElement);

			graphData[graphname].ellipseData[ellipsename] = [ellipseElement, ellipseoptions]
		}

		function addText(graphname, textname, textoptions) {
			gdata = graphData[graphname]
			textoptions = textoptions || {}

			aratio = gdata.aspectratio

			if (textoptions.x != 0) {
				textoptions.x = parseFloat(textoptions.x.toString() || 0.3)
			}
			else {
				textoptions.x = 0
			}
			if (textoptions.y != 0) {
				textoptions.y = parseFloat(textoptions.y.toString() || 0.3)
			}
			else {
				textoptions.y = 0
			}

			textoptions.text = textoptions.text || ''
			textoptions.name = textname || uid

			textoptions.textAlign = textoptions.textAlign || 'left'
			textoptions.fontSize = textoptions.fontSize || 12
			textoptions.fontFamily = textoptions.fontFamily || 'Source Sans Pro'
			
			textoptions.textcolor = textoptions.textcolor || 'hsla(190, 100%, 0%, 1)'
			
			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', graphToScaledX(textoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			textElement.setAttribute('y', graphToScaledY(textoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			textElement.setAttribute('id', graphname + '-text-' + textname)
			uid = uid + 1
			textElement.setAttribute('vector-effect','non-scaling-stroke');
			textElement.style.fill = textoptions.textcolor
			textElement.innerHTML = textoptions.text
			textElement.style.fontFamily = textoptions.fontFamily
			textElement.style.fontSize = textoptions.fontSize;
			if (textoptions.textAlign == 'center') {
				textElement.setAttribute('text-anchor','middle')
			}
			gdata.svgElement.appendChild(textElement);

			graphData[graphname].textData[textname] = [textElement, textoptions]
			return [textElement, textoptions]
		}

		function updateText(graphname, textname, textvalues) {
			gdata = graphData[graphname]

			aratio = gdata.aspectratio

			textoptions = gdata.textData[textname][1]
			textElement = gdata.textData[textname][0]

			textoptions.text = textvalues.text || textoptions.text
			textoptions.x = textvalues.x || textoptions.x
			textoptions.y = textvalues.y || textoptions.y
			textoptions.textcolor = textvalues.textcolor || textoptions.textcolor
			textoptions.fontSize = textvalues.fontSize || textoptions.fontSize

			textElement.innerHTML = textoptions.text
			textElement.setAttribute('x', graphToScaledX(textoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			textElement.setAttribute('y', graphToScaledY(textoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			textElement.style.fill = textoptions.textcolor
			textElement.style.fontSize = textoptions.fontSize;
			
			graphData[graphname].textData[textname] = [textElement, textoptions]
			return [textElement, textoptions]
		}

		function addRectangle(graphname, rectname, rectoptions) {
			gdata = graphData[graphname]
			aratio = gdata.aspectratio
			rectoptions = rectoptions || {}

			rectoptions.x = parseFloat(rectoptions.x.toString() || 0)
			rectoptions.y = parseFloat(rectoptions.y.toString() || 0)
			rectoptions.w = parseFloat(rectoptions.w.toString() || 1)
			rectoptions.h = parseFloat(rectoptions.h.toString() || 1)
			rectoptions.name = rectname || uid

			rectoptions.stroke = rectoptions.stroke || 'hsla(190, 100%, 50%, 0.5)'
			rectoptions.strokewidth = rectoptions.strokewidth || 0.1
			rectoptions.strokedasharray = rectoptions.strokedasharray || ""

			
			rectoptions.rectcolor = rectoptions.rectcolor || 'hsla(190, 100%, 50%, 1)'

			rx = distanceBTWgraphToSvg([0,0],[rectoptions.w, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, rectoptions.h], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			
			var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
			rectElement.setAttribute('x', graphToScaledX(rectoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			rectElement.setAttribute('y', graphToScaledY(rectoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			rectElement.setAttribute('width', rx + '%')
			rectElement.setAttribute('height', ry + '%');
			rectElement.setAttribute('id', graphname + '-rect-' + rectname)
			uid = uid + 1
			rectElement.setAttribute('vector-effect','non-scaling-stroke');
			rectElement.style.fill = rectoptions.rectcolor
			rectElement.style.strokeWidth = rectoptions.strokewidth + '%';
			rectElement.style.stroke = rectoptions.stroke;
			rectElement.setAttribute('stroke-dasharray', rectoptions.strokedasharray);

			gdata.svgElement.appendChild(rectElement);

			graphData[graphname].rectData[rectname] = [rectElement, rectoptions]

			return [rectElement, rectoptions]
		}

		function updateRectangle(graphname, rectname, rectvalueupdate) {
			gdata = graphData[graphname]
			rectoptions = gdata.rectData[rectname][1]
			rectElement = gdata.rectData[rectname][0]
			aratio = gdata.aspectratio

			if (rectvalueupdate.x != 0) {
				rectoptions.x = rectvalueupdate.x || rectoptions.x	
			}
			else {
				rectoptions.x = rectvalueupdate.x
			}


			if (rectvalueupdate.y != 0) {
				rectoptions.y = rectvalueupdate.y || rectoptions.y	
			}
			else {
				rectoptions.y = rectvalueupdate.y
			}


			if (rectvalueupdate.w != 0) {
				rectoptions.w = rectvalueupdate.w || rectoptions.w	
			}
			else {
				rectoptions.w = rectvalueupdate.w
			}


			if (rectvalueupdate.h != 0) {
				rectoptions.h = rectvalueupdate.h || rectoptions.h	
			}
			else {
				rectoptions.h = rectvalueupdate.h
			}
			
			rectoptions.stroke = rectvalueupdate.stroke || rectoptions.stroke
			rectoptions.strokewidth = rectvalueupdate.strokewidth || rectoptions.strokewidth
			
			rectoptions.rectcolor = rectvalueupdate.rectcolor || rectoptions.rectcolor

			rx = distanceBTWgraphToSvg([0,0],[rectoptions.w, 0], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			ry = distanceBTWgraphToSvg([0,0],[0, rectoptions.h], gdata.xmin, gdata.xmax, gdata.ymin, gdata.ymax, aratio)
			
			rectElement.setAttribute('x', graphToScaledX(rectoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			rectElement.setAttribute('y', graphToScaledY(rectoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			rectElement.setAttribute('width', rx + '%')
			rectElement.setAttribute('height', ry + '%');
			rectElement.style.fill = rectoptions.rectcolor
			rectElement.style.strokeWidth = rectoptions.strokewidth + '%';
			rectElement.style.stroke = rectoptions.stroke;

			
			graphData[graphname].rectData[rectname] = [rectElement, rectoptions]
		}

		function addPoint(graphname, pointname, pointoptions) {
			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			pointoptions = pointoptions || {}

			if (pointoptions.x != 0) {
				pointoptions.x = pointoptions.x || 0.3	
			}
			if (pointoptions.y != 0) {
				pointoptions.y = pointoptions.y || 0.3	
			}
			// pointoptions.y = pointoptions.y || 0.3
			pointoptions.pointsize = pointoptions.pointsize || 0.7
			pointoptions.name = pointname || uid

			pointoptions.pointcolor = pointoptions.pointcolor || 'hsla(190, 100%, 50%, 1)'
			
			var pointElement = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
			pointElement.setAttribute('cx', graphToScaledX(pointoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			pointElement.setAttribute('cy', graphToScaledY(pointoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			pointElement.setAttribute('rx', pointoptions.pointsize + '%')
			pointElement.setAttribute('ry', pointoptions.pointsize + '%');
			pointElement.setAttribute('id', graphname + '-point-' + pointname)
			uid = uid + 1
			pointElement.setAttribute('vector-effect','non-scaling-stroke');
			pointElement.style.fill = pointoptions.pointcolor
			gdata.svgElement.appendChild(pointElement);

			pointoptions.draggability = pointoptions.draggability || 'no'
			if (pointoptions.draggability == 'yes') {
				pointoptions.currentlyDraggable = pointoptions.currentlyDraggable || 'yes'
			}
			else {
				pointoptions.currentlyDraggable = pointoptions.currentlyDraggable || 'no'
			}
			pointoptions.runFunctionOnDragEnd = pointoptions.runFunctionOnDragEnd || ''
			pointoptions.runFunctionOnDragStart = pointoptions.runFunctionOnDragStart || ''
			pointoptions.runFunctionDuringDrag = pointoptions.runFunctionDuringDrag || ''

			if (pointoptions.draggability == 'yes') {
				pointElement.addEventListener('mousedown', pointDrag)

				pointElement.addEventListener('touchstart', pointDrag)
				gdata.svgElement.addEventListener('touchmove', graphTouchDisable)
				pointElement.style.pointerEvents = 'auto'
			}
			else {
				pointElement.style.pointerEvents = 'none'
			}



			pointoptions.dragDirection = pointoptions.dragDirection || 'bothXY'
			pointoptions.dragIfCondition = pointoptions.dragIfCondition || 'true'

			graphData[graphname].pointData[pointname] = [pointElement, pointoptions]
			reverseGraphElementMap[pointElement.id] = [graphname, pointname]
			return [pointElement, pointoptions]
		}

		function updatePoint(graphname, pointname, newpointoptions) {
			gdata = graphData[graphname]
			pointoptions = gdata.pointData[pointname][1]
			pointElement = gdata.pointData[pointname][0]
			aratio = gdata.aspectratio

			if (pointoptions.x != 0) {
				pointoptions.x = newpointoptions.x || pointoptions.x
			}
			if (pointoptions.y != 0) {
				pointoptions.y = newpointoptions.y || pointoptions.y
			}

			// pointoptions.y = pointoptions.y || 0.3
			pointoptions.pointsize = newpointoptions.pointsize || pointoptions.pointsize

			pointoptions.pointcolor = newpointoptions.pointcolor || pointoptions.pointcolor
			
			pointElement.setAttribute('cx', graphToScaledX(pointoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			pointElement.setAttribute('cy', graphToScaledY(pointoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');
			pointElement.setAttribute('rx', pointoptions.pointsize + '%')
			pointElement.setAttribute('ry', pointoptions.pointsize + '%');
			pointElement.setAttribute('vector-effect','non-scaling-stroke');
			pointElement.style.fill = pointoptions.pointcolor

			pointoptions.draggability = newpointoptions.draggability || pointoptions.draggability
			if (pointoptions.draggability == 'yes') {
				pointoptions.currentlyDraggable = newpointoptions.currentlyDraggable || pointoptions.currentlyDraggable
			}
			else {
				pointoptions.currentlyDraggable = newpointoptions.currentlyDraggable || pointoptions.currentlyDraggable
			}
			pointoptions.runFunctionOnDragEnd = newpointoptions.runFunctionOnDragEnd || pointoptions.runFunctionOnDragEnd
			pointoptions.runFunctionDuringDrag = newpointoptions.runFunctionDuringDrag || pointoptions.runFunctionDuringDrag
			pointoptions.dragDirection = newpointoptions.dragDirection || pointoptions.dragDirection
			pointoptions.dragIfCondition = newpointoptions.dragIfCondition || pointoptions.dragIfCondition

			// if (pointoptions.draggability == 'yes') {
			// 	pointElement.addEventListener('mousedown', pointDrag)
			// 	pointElement.addEventListener('touchstart', pointDrag)
			// }
			// else {
			// 	pointElement.removeEventListener('mousedown', pointDrag)
			// 	pointElement.removeEventListener('touchstart', pointDrag)
			// }

			graphData[graphname].pointData[pointname] = [pointElement, pointoptions]

		}

		function updatePointXY(graphname, pointname, xvalue, yvalue) {
			pointElement = document.getElementById(graphname + '-point-' + pointname)
			gdata = graphData[graphname]
			aratio = gdata.aspectratio

			pointoptions = graphData[graphname].pointData[pointname][1]

			pointoptions.x = xvalue
			pointoptions.y = yvalue
			
			
			pointElement.setAttribute('cx', graphToScaledX(pointoptions.x, gdata.xmin, gdata.xmax, aratio) + '%');
			pointElement.setAttribute('cy', graphToScaledY(pointoptions.y, gdata.ymin, gdata.ymax, aratio) + '%');

			graphData[graphname].pointData[pointname] = [pointElement, pointoptions]
		}

		function removePoint(graphname, pointname) {
			pointElement = document.getElementById(graphname + '-point-' + pointname)
			
			pointElement.outerHTML = "";
			delete graphData[graphname].pointData[pointname]
		}

		function removeLine(graphname, linename) {
			lineElement = document.getElementById(graphname + '-line-' + linename)
			lineElement.outerHTML = "";
			delete graphData[graphname].lineData[linename]
		}

		function removeCircle(graphname, circlename) {
			circleElement = document.getElementById(graphname + '-circle-' + circlename)
			circleElement.outerHTML = "";
			delete graphData[graphname].circleData[circlename]
		}

		function removeText(graphname, textname) {
			textElement = document.getElementById(graphname + '-text-' + textname)
			textElement.outerHTML = "";
			delete graphData[graphname].textData[textname]
		}

		function removePath(graphname, pathname) {
			pathElement = document.getElementById(graphname + '-path-' + pathname)
			pathElement.outerHTML = "";
			delete graphData[graphname].pathData[pathname]
		}

		function removeGraph(graphname) {
			graphElement = document.getElementById(graphname)
			graphElement.outerHTML = "";
			delete graphData[graphname]
		}

		function basicSlider(graphname2, slidernamebasic, maxv, minv, currentv, thickness, coordinates) {
			options = {}
			options.maxvalue = maxv
			options.minvalue = minv
			options.currentvalue = currentv
			options.x1 = coordinates[0][0]
			options.y1 = coordinates[0][1]
			options.x2 = coordinates[1][0]
			options.y2 = coordinates[1][1]
			options.strokewidth = thickness
			options.automaticallySetKnobRadius = 'yes'
			addSlider(graphname2, slidernamebasic, options)
		}

		function makeArc(arcradius, arcthickness, arccolor, startanglepercent, endanglepercent, ringname) {
			resolution = 100
			arcpoints = []
			for (p = startanglepercent*resolution; p < endanglepercent*(resolution + 1); p++) {
				quanta = 2*Math.PI/resolution
				arcpoints.push([arcradius*Math.cos(quanta*p), arcradius*Math.sin(quanta*p)])
			}
			options = {}
			options.points = arcpoints
			options.pathcolor = arccolor
			options.strokewidth = arcthickness
			addPath('ringvisualgraph', ringname, options)
			// console.log(options.points)

			return arcpoints
		}

		function makeArcS(ringarcnum, arcradius, arcthickness, arccolor, startanglepercent, endanglepercent, ringname) {
			resolution = 20
			arcpoints = []
			for (p = startanglepercent*resolution; p < endanglepercent*(resolution + 1); p++) {
				quanta = 2*Math.PI/resolution
				arcpoints.push([arcradius*Math.cos(quanta*p), arcradius*Math.sin(quanta*p)])
			}
			options = {}
			options.points = arcpoints
			options.pathcolor = arccolor
			options.strokewidth = arcthickness
			addPath('ringvisualgraph', ringname, options)
			// console.log(options.points)
		}

		function deleteSegments(collection) {
			if (typeof collection != 'undefined') {
				for (f = 0; f < collection.length; f++) {
					collection[f].outerHTML = ''
				}
			}
		}

		function randomChoice(choicearray) {
			return choicearray[parseInt(Math.random()*choicearray.length)]
		}

		function randomWeightedChoice(choicearray, weightArray) {
			if (choicearray.length == weightArray.length) {
				weightSumA = weightArray.reduce(function(a, b) { return a + b; }, 0);
				weightvalueChosen = Math.random()*weightSumA
				weightSumZ = 0
				for (weightIndex = 0; weightIndex < weightArray.length; weightIndex++) {
					weightSumZ = weightSumZ + weightArray[weightIndex]
					if (weightSumZ >= weightvalueChosen) {
						indexchosenW = weightIndex
						break
					}
				}
				return choicearray[indexchosenW]
			}
				
		}

		function linearValue(xv1, xv2, yv1, yv2, inputvl) {
			return yv1 + ((inputvl - xv1)/(xv2 - xv1))*(yv2 - yv1)
		}

		currentMovingPoint = ''
		function pointDrag(event) {
			
			gphname = reverseGraphElementMap[event.target.id][0]
			ptname = reverseGraphElementMap[event.target.id][1]
			if (graphData[gphname].pointData[ptname][1].currentlyDraggable == 'yes') {
				if (graphData[gphname].currentlyDraggableGraph == 'yes') {
					document.getElementById(gphname).removeEventListener('mousedown', graphDragHandle)
					document.getElementById(gphname).removeEventListener('touchstart', graphDragHandle)
				}
				event.target.removeEventListener('mousedown', pointDrag)
				event.target.removeEventListener('touchstart', pointDrag)
				window.addEventListener('mousemove', pointMoveEvent)
				window.addEventListener('mouseup', pointUpEvent)
				event.preventDefault()
				window.addEventListener('touchmove', pointMoveEvent, { passive: false })
				window.addEventListener('touchend', pointUpEvent)
				// window.addEventListener('mouseout', pointUpEvent)
				currentMovingPoint = event.target
				eval(graphData[gphname].pointData[ptname][1].runFunctionOnDragStart)
			}
				
		}

		svgPTVariable = {}
		
		function pointMoveEvent(event) {
			event.preventDefault()
			gphname = reverseGraphElementMap[currentMovingPoint.id][0]
			ptname = reverseGraphElementMap[currentMovingPoint.id][1]
			var rect = document.getElementById(gphname).getBoundingClientRect();
			posx = event.clientX - rect.left;
			posy = event.clientY - rect.top;
			svgPTVariable[gphname].x = event.clientX;
			svgPTVariable[gphname].y = event.clientY;

			if (event.clientX == undefined) {
				posx = event.changedTouches[0].clientX - rect.left;
				posy = event.changedTouches[0].clientY - rect.top;
				svgPTVariable[gphname].x = event.changedTouches[0].clientX;
				svgPTVariable[gphname].y = event.changedTouches[0].clientY;
			}

			var cursorpt =  svgPTVariable[gphname].matrixTransform(document.getElementById(gphname).getScreenCTM().inverse());

			moveX = svgToGraphX(cursorpt.x, graphData[gphname].xmin,graphData[gphname].xmax, graphData[gphname].aspectratio)
			moveY = svgToGraphY(cursorpt.y, graphData[gphname].ymin,graphData[gphname].ymax, graphData[gphname].aspectratio)

			if (typeof eval(graphData[gphname].pointData[ptname][1].dragIfCondition) != undefined) {
				if (eval(graphData[gphname].pointData[ptname][1].dragIfCondition) == true) {
					if (graphData[gphname].pointData[ptname][1].dragDirection == 'bothXY') {
						eval(graphData[gphname].pointData[ptname][1].runFunctionDuringDrag)
						updatePointXY(gphname, ptname, moveX, moveY)
						
					}
					else if (graphData[gphname].pointData[ptname][1].dragDirection == 'onlyY') {
						eval(graphData[gphname].pointData[ptname][1].runFunctionDuringDrag)
						updatePointXY(gphname, ptname, graphData[gphname].pointData[ptname][1].x, moveY)
					}
					else if (graphData[gphname].pointData[ptname][1].dragDirection == 'onlyX') {
						eval(graphData[gphname].pointData[ptname][1].runFunctionDuringDrag)
						updatePointXY(gphname, ptname, moveX, graphData[gphname].pointData[ptname][1].y)
						
					}
				}
			}
		}

		function pointUpEvent(event) {
			gphname = reverseGraphElementMap[currentMovingPoint.id][0]
			ptname = reverseGraphElementMap[currentMovingPoint.id][1]
			if (graphData[gphname].currentlyDraggableGraph == 'yes') {
				document.getElementById(gphname).addEventListener('mousedown', graphDragHandle)
				document.getElementById(gphname).addEventListener('touchstart', graphDragHandle)
			}
			currentMovingPoint.addEventListener('mousedown', pointDrag)
			currentMovingPoint.addEventListener('touchstart', pointDrag)
			window.removeEventListener('mousemove', pointMoveEvent)
			window.removeEventListener('mouseup', pointUpEvent)
			window.removeEventListener('touchmove', pointMoveEvent)
			window.removeEventListener('touchend', pointUpEvent)

			// window.removeEventListener('mouseout', pointUpEvent)
			eval(graphData[gphname].pointData[ptname][1].runFunctionOnDragEnd)
		}

		function wheelHandle(event) {
			event.preventDefault();
			whlvalue = (event.wheelDeltaY)/Math.abs(event.wheelDeltaY)
			if (event.wheelDeltaY == undefined) {
				whlvalue = (event.deltaY)/Math.abs(event.deltaY)
				// For FireFox
			}
			scalefactorup = 1.1
			scalefactordown = 0.9

			if(graphData[event.target.id.split('-')[0]] == undefined) {

			}
			else {
				gdata = graphData[event.target.id.split('-')[0]]

				scale = gdata.ymax - gdata.ymin
				expstring = scale.toExponential().toString()
				ordery = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
				// console.log(ordery)

				scale = gdata.xmax - gdata.xmin
				expstring = scale.toExponential().toString()
				orderx = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
				// console.log(orderx)

				gphname = gdata.name

				var rect = document.getElementById(gphname).getBoundingClientRect();
				posx = event.clientX - rect.left;
				posy = event.clientY - rect.top;
				svgPTVariable[gphname].x = event.clientX;
				svgPTVariable[gphname].y = event.clientY;

				if (event.clientX == undefined) {
					posx = event.changedTouches[0].clientX - rect.left;
					posy = event.changedTouches[0].clientY - rect.top;
					svgPTVariable[gphname].x = event.changedTouches[0].clientX;
					svgPTVariable[gphname].y = event.changedTouches[0].clientY;
				}

				var cursorpt =  svgPTVariable[gphname].matrixTransform(document.getElementById(gphname).getScreenCTM().inverse());

				zoomlocationX = svgToGraphX(cursorpt.x, graphData[gphname].xmin,graphData[gphname].xmax, graphData[gphname].aspectratio)
				zoomlocationY = svgToGraphY(cursorpt.y, graphData[gphname].ymin,graphData[gphname].ymax, graphData[gphname].aspectratio)

				currentvalues = graphData[gphname]

				posx = posx/rect.width
				posy = posy/rect.height

				if (posx > 0.11 && posx < 0.89 && posy > 0.11 && posy < 0.89) {
					if (whlvalue < 0) {
						scaleupdownFactor = scalefactorup
						leftX = (zoomlocationX - currentvalues.xmin)*scaleupdownFactor
						newZXmin = zoomlocationX - leftX
						rightX = (currentvalues.xmax - zoomlocationX)*scaleupdownFactor
						newZXmax = zoomlocationX + rightX
						leftY = (zoomlocationY - currentvalues.ymin)*scaleupdownFactor
						newZYmin = zoomlocationY - leftY
						rightY = (currentvalues.ymax - zoomlocationY)*scaleupdownFactor
						newZYmax = zoomlocationY + rightY

						options = {}
						options.xmin = newZXmin
						options.xmax = newZXmax
						options.ymin = newZYmin
						options.ymax = newZYmax
						
						updateGraphZoom(gphname, options)
					}
					else if (whlvalue >= 0 && orderx < 14 && ordery < 14) {

						scaleupdownFactor = scalefactordown
						leftX = (zoomlocationX - currentvalues.xmin)*scaleupdownFactor
						newZXmin = zoomlocationX - leftX
						rightX = (currentvalues.xmax - zoomlocationX)*scaleupdownFactor
						newZXmax = zoomlocationX + rightX
						leftY = (zoomlocationY - currentvalues.ymin)*scaleupdownFactor
						newZYmin = zoomlocationY - leftY
						rightY = (currentvalues.ymax - zoomlocationY)*scaleupdownFactor
						newZYmax = zoomlocationY + rightY

						options = {}
						options.xmin = newZXmin
						options.xmax = newZXmax
						options.ymin = newZYmin
						options.ymax = newZYmax
						updateGraphZoom(gphname, options)
					}
				}

					
			}
		}

		currentMovingGraph = ''
		currentMovingGraphStartLocation = []
		
		function graphDragHandle(event) {
			event.preventDefault();
			gphname = event.target.id.split('-')[0]
			if (graphData[gphname].currentlyDraggableGraph == 'yes') {
				graphData[gphname].svgElement.removeEventListener('mousedown', graphDragHandle)
				graphData[gphname].svgElement.removeEventListener('touchstart', graphDragHandle)
				window.addEventListener('mousemove', graphDragMoveEvent)
				window.addEventListener('mouseup', graphDragUpEvent)
				event.preventDefault()
				window.addEventListener('touchmove', graphDragMoveEvent, { passive: false })
				window.addEventListener('touchend', graphDragUpEvent)
				// window.addEventListener('mouseout', pointUpEvent)
				currentMovingGraph = graphData[gphname].svgElement

				var rect = document.getElementById(gphname).getBoundingClientRect();
				posx = event.clientX - rect.left;
				posy = event.clientY - rect.top;
				svgPTVariable[gphname].x = event.clientX;
				svgPTVariable[gphname].y = event.clientY;

				if (event.clientX == undefined) {
					posx = event.changedTouches[0].clientX - rect.left;
					posy = event.changedTouches[0].clientY - rect.top;
					svgPTVariable[gphname].x = event.changedTouches[0].clientX;
					svgPTVariable[gphname].y = event.changedTouches[0].clientY;

				}

				var cursorpt =  svgPTVariable[gphname].matrixTransform(document.getElementById(gphname).getScreenCTM().inverse());

				tapX = svgToGraphX(cursorpt.x, graphData[gphname].xmin,graphData[gphname].xmax, graphData[gphname].aspectratio)
				tapY = svgToGraphY(cursorpt.y, graphData[gphname].ymin,graphData[gphname].ymax, graphData[gphname].aspectratio)

				currentMovingGraphStartLocation = [tapX, tapY]
				currentMovingGraphOriginalBounds = [graphData[gphname].xmin, graphData[gphname].xmax, graphData[gphname].ymin, graphData[gphname].ymax]

				currentMovingGraph.style.cursor = 'move'

			}
		}

		function clientToGraph(clientValues, graphNameInput) {
			svgPTVariable[graphNameInput].x = clientValues[0];
			svgPTVariable[graphNameInput].y = clientValues[1];

			var cursorpt =  svgPTVariable[gphname].matrixTransform(document.getElementById(gphname).getScreenCTM().inverse());

			return [svgToGraphX(cursorpt.x, graphData[gphname].xmin,graphData[gphname].xmax, graphData[gphname].aspectratio), svgToGraphY(cursorpt.y, graphData[gphname].ymin,graphData[gphname].ymax, graphData[gphname].aspectratio)]

		}

		function graphPinchMoveEvent(event) {
			if (event.changedTouches.length == 2) {
				gphname = event.target.id.split('-')[0]
				touch1 = [event.changedTouches[0].clientX, event.changedTouches[0].clientY]
				touch2 = [event.changedTouches[1].clientX, event.changedTouches[1].clientY]

				touch1 = clientToGraph(touch1, gphname)
				touch2 = clientToGraph(touch2, gphname)

				oldtouch1 = clientToGraph(pinchStartData[0], gphname)
				oldtouch2 = clientToGraph(pinchStartData[1], gphname)

				pinchScale = distF(oldtouch1, oldtouch2)/distF(touch1, touch2)
				pinchStartMidpoint = [(oldtouch1[0] + oldtouch2[0])/2, (oldtouch1[1] + oldtouch2[1])/2]

				zoomlocationX = pinchStartMidpoint[0]
				zoomlocationY = pinchStartMidpoint[1]

				gdata = graphData[gphname]

				scale = gdata.ymax - gdata.ymin
				expstring = scale.toExponential().toString()
				ordery = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
				// console.log(ordery)

				scale = gdata.xmax - gdata.xmin
				expstring = scale.toExponential().toString()
				orderx = (expstring.slice(expstring.indexOf('e') + 1)*(-1))
				// console.log(orderx)

				currentvalues = graphData[gphname]

				scaleFactorForTouch = 1
				if (pinchScale <= 1) {
					scaleFactorForTouch = linearValue(0, 1, 0.9, 1, pinchScale)
				}
				else {
					scaleFactorForTouch = linearValue(1, 5, 1, 1.1, pinchScale)
				}

				leftX = (zoomlocationX - currentvalues.xmin)*scaleFactorForTouch
				newZXmin = zoomlocationX - leftX
				rightX = (currentvalues.xmax - zoomlocationX)*scaleFactorForTouch
				newZXmax = zoomlocationX + rightX
				leftY = (zoomlocationY - currentvalues.ymin)*scaleFactorForTouch
				newZYmin = zoomlocationY - leftY
				rightY = (currentvalues.ymax - zoomlocationY)*scaleFactorForTouch
				newZYmax = zoomlocationY + rightY

				options = {}
				options.xmin = newZXmin
				options.xmax = newZXmax
				options.ymin = newZYmin
				options.ymax = newZYmax
				
				updateGraphZoom(gphname, options)
				
				// console.log(pinchStartMidpoint)
			}
		}

		function graphPinchEndEvent(event) {
			pinchZoom = false
			window.removeEventListener('touchmove', graphPinchMoveEvent)
			window.removeEventListener('touchend', graphPinchEndEvent)
		}

		pinchZoom = false
		pinchStartData = []

		function graphDragMoveEvent(event) {
			event.preventDefault()
			gphname = currentMovingGraph.id
			var rect = document.getElementById(gphname).getBoundingClientRect();
			posx = event.clientX - rect.left;
			posy = event.clientY - rect.top;
			svgPTVariable[gphname].x = event.clientX;
			svgPTVariable[gphname].y = event.clientY;

			touchEventDetect = 0

			if (event.clientX == undefined) {
				posx = event.changedTouches[0].clientX - rect.left;
				posy = event.changedTouches[0].clientY - rect.top;
				svgPTVariable[gphname].x = event.changedTouches[0].clientX;
				svgPTVariable[gphname].y = event.changedTouches[0].clientY;
				
				if (event.changedTouches.length == 2) {
					oldtouch1 = [event.changedTouches[0].clientX, event.changedTouches[0].clientY]
					oldtouch2 = [event.changedTouches[1].clientX, event.changedTouches[1].clientY]
					pinchStartData = [oldtouch1, oldtouch2]
					dummyEve = {}
					pinchZoom = true
					graphDragUpEvent(dummyEve)
					window.addEventListener('touchmove', graphPinchMoveEvent)
					window.addEventListener('touchend', graphPinchEndEvent)
				}

				touchEventDetect = event.changedTouches[0].identifier
				
			}

			if (pinchZoom == false && touchEventDetect == 0) {
				var cursorpt =  svgPTVariable[gphname].matrixTransform(document.getElementById(gphname).getScreenCTM().inverse());

				moveX = svgToGraphX(cursorpt.x, graphData[gphname].xmin,graphData[gphname].xmax, graphData[gphname].aspectratio)
				moveY = svgToGraphY(cursorpt.y, graphData[gphname].ymin,graphData[gphname].ymax, graphData[gphname].aspectratio)

				deltaVecX = moveX - currentMovingGraphStartLocation[0]
				deltaVecY = moveY - currentMovingGraphStartLocation[1]
				currentvalues = graphData[gphname]

				newZXmin = currentvalues.xmin - deltaVecX
				newZXmax =currentvalues.xmax - deltaVecX
				newZYmin = currentvalues.ymin - deltaVecY
				newZYmax = currentvalues.ymax - deltaVecY
				
				if (typeof eval(graphData[gphname].dragIfCondition) != undefined) {
					if (eval(graphData[gphname].dragIfCondition) == true) {
						if (graphData[gphname].dragDirection == 'bothXY') {
							options = {}
							options.xmin = newZXmin
							options.xmax = newZXmax
							options.ymin = newZYmin
							options.ymax = newZYmax
							updateGraphZoom(gphname, options)
							eval(graphData[gphname].runFunctionDuringDrag)
						}
						else if (graphData[gphname].dragDirection == 'onlyY') {
							options = {}
							options.ymin = newZYmin
							options.ymax = newZYmax
							updateGraphZoom(gphname, options)
							eval(graphData[gphname].runFunctionDuringDrag)
						}
						else if (graphData[gphname].dragDirection == 'onlyX') {
							options = {}
							options.xmin = newZXmin
							options.xmax = newZXmax
							updateGraphZoom(gphname, options)
							eval(graphData[gphname].runFunctionDuringDrag)
						}
					}
				}
			}

				
		}

		function graphDragUpEvent(event) {
			gphname = currentMovingGraph.id

			currentMovingGraph.addEventListener('mousedown', graphDragHandle)
			currentMovingGraph.addEventListener('touchstart', graphDragHandle)
			window.removeEventListener('mousemove', graphDragMoveEvent)
			window.removeEventListener('mouseup', graphDragUpEvent)
			window.removeEventListener('touchmove', graphDragMoveEvent)
			window.removeEventListener('touchend', graphDragUpEvent)

			// window.removeEventListener('mouseout', pointUpEvent)
			eval(graphData[gphname].runFunctionOnDragEnd)

			currentMovingGraph.style.cursor = 'auto'
		}

		function graphTouchDisable(event) {
			event.preventDefault()
		}

		function getSvgCursorLocation(clocation, graph_name) {
			gphname = graphData[graph_name].name

			svgPTVariable[gphname].x = clocation.x;
			svgPTVariable[gphname].y = clocation.y;

			var cursorpt2 =  svgPTVariable[gphname].matrixTransform(document.getElementById(gphname).getScreenCTM().inverse());

			moveX2 = svgToGraphX(cursorpt2.x, graphData[gphname].xmin,graphData[gphname].xmax, graphData[gphname].aspectratio)
			moveY2 = svgToGraphY(cursorpt2.y, graphData[gphname].ymin,graphData[gphname].ymax, graphData[gphname].aspectratio)

			return [moveX2, moveY2]
		}


		dmode = 'square'
		if (1.25*window.innerWidth < window.innerHeight && window.innerWidth < window.innerHeight) {
			dmode = 'portrait'
		}
		else if (window.innerWidth > 1.3*window.innerHeight && window.innerWidth > window.innerHeight) {
			dmode = 'landscape'
		}

		function setFont(divCollection, fontval) {
			for (divN = 0; divN < divCollection.length; divN++) {
				document.getElementById(divCollection[divN]).style.fontSize = fontval
			}
		}

		function distF(pt1, pt2) {
			return Math.pow(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2), 0.5)
		}

		function addVec(pt1, pt2) {
			return [pt1[0] + pt2[0], pt1[1] + pt2[1]]
		}

		function directionvec(pt1, pt2) {
			diff = [pt2[0] - pt1[0], pt2[1] - pt1[1]]
			difflen = distF(diff, [0,0])
			return [diff[0]/difflen, diff[1]/difflen]
		}

		function mod(ofVector) {
			return distF(ofVector, [0,0])
		}

		function shuffle(array) {
			var currentIndex = array.length, temporaryValue, randomIndex;

			// While there remain elements to shuffle...
			while (0 !== currentIndex) {

				// Pick a remaining element...
				randomIndex = Math.floor(Math.random() * currentIndex);
				currentIndex -= 1;

				// And swap it with the current element.
				temporaryValue = array[currentIndex];
				array[currentIndex] = array[randomIndex];
				array[randomIndex] = temporaryValue;
			}
			return array;
		}

		function handleLayout1() {
			if (dmode == 'landscape') {
				// document.getElementById('mainVSpacer1').style.width = '2%'
				// document.getElementById('MainBlock1').style.width = '48%'
				// document.getElementById('mainVSpacer2').style.width = '5%'
				// document.getElementById('MainBlock2').style.width = '43%'
				// document.getElementById('mainVSpacer3').style.width = '2%'

				// $('#plotGraphH').appendTo('#MainBlock1')
				// $('#mainB2HSpacer5').appendTo('#MainBlock1')
				// $('#parametersH').appendTo('#MainBlock1')
				// $('#mainB2HSpacer6').appendTo('#MainBlock1')

				// document.getElementById('mainB2HSpacer1').style.height = '3%'
				// document.getElementById('maintitle').style.textAlign = 'right'
				// // document.getElementById('titleH').style.height = '15%'
				// document.getElementById('maintitle').style.fontSize = '2vmax'

				// document.getElementById('maintitle').innerHTML = "<font style='font-weight: bold;'>Epidemic Simulation </font><br/><font style='font-family: Source Sans Pro; font-size: 1.1vmax; vertical-align: bottom;'>An interactive inspired by 3Blue1Brown's <a href='https://www.youtube.com/watch?v=gxAaO2rsdIs' style='text-decoration: none; cursor: pointer;' target='_blank'><font style='color: hsla(197, 100%, 50%, 1);'>'Simulating an Epidemic' video</font></a><br/><font style='font-size: 0.9vmax'>For other interactives, visit <a href='https://prajwalsouza.github.io/' style='text-decoration: none; cursor: pointer;' target='_blank'><font style='color: hsla(280, 100%, 70%, 1);'>prajwalsouza.github.io</font></a></font></font>"

				// document.getElementById('mainB2HSpacer2').style.height = '3%'
				// document.getElementById('caseTypeNameH').style.height = '4%'
				// document.getElementById('caseTypeNameH').style.fontSize = '1vmax'

				// document.getElementById('upperLayer').style.height = '65%'
				// document.getElementById('simpleGraphH').style.height = '65%'
				// document.getElementById('centralLocationCaseGraphH').style.height = '65%'
				// document.getElementById('communitiesCaseGraphH').style.height = '65%'
				// document.getElementById('simpleCaseGraph&QH').style.height = '65%'
				// document.getElementById('centralLocationQuarantineCaseGraphH').style.height = '65%'
				// document.getElementById('communitiesQuarantineCaseGraphH').style.height = '65%'

				// document.getElementById('play-Info-QuarantineH').style.height = '4%'

				// document.getElementById('playbutton').style.fontSize = '0.8vmax'
				// document.getElementById('resetbutton').style.fontSize = '0.8vmax'

				// document.getElementById('playButtonH').style.width = '12%'
				// document.getElementById('resetButtonH').style.width = '12%'

				// document.getElementById('play-Info-QuarantineHSpacer1').style.width = '4%'

				// document.getElementById('infoH').style.fontSize = '0.8vmax'
				// document.getElementById('infoH').style.width = '100%'

				// document.getElementById('quarantineH').style.fontSize = '0.9vmax'
				// document.getElementById('quarantineH').style.float = 'right'
				// document.getElementById('quarantineH').style.width = '25%'
				// document.getElementById('quarantineH').style.fontFamily = 'Source Sans Pro'
				// document.getElementById('quarantinecheckLabel').style.fontSize = '0.9vmax'

				// document.getElementById('mainB2HSpacer3').style.height = '3%'
				// document.getElementById('caseTypeChooseH').style.height = '4%'

				// document.getElementById('simpleCaseoption').style.fontSize = '0.86vmax'
				// document.getElementById('centralLocationoption').style.fontSize = '0.86vmax'
				// document.getElementById('communitiesoption').style.fontSize = '0.86vmax'

				// document.getElementById('simpleCaseoptionH').style.width = '14%'
				// document.getElementById('centralLocationoptionH').style.width = '27%'
				// document.getElementById('communitiesoptionH').style.width = '23%'

				// // $('#CommunitiesoptionH').insertBefore('#simpleCaseoptionH')
				// // $('#centralLocationoptionH').insertBefore('#simpleCaseoptionH')

				// $('#quarantineH').insertAfter('#communitiesoptionH')

				// // document.getElementById('simpleCaseoptionH').style.float = 'right'
				// // document.getElementById('centralLocationoptionH').style.float = 'right'
				// // document.getElementById('CommunitiesoptionH').style.float = 'right'

				// document.getElementById('plotGraphH').style.height = '40%'
				// document.getElementById('parametersH').style.height = '45%'

				// document.getElementById('parametersTitleText').style.fontSize = '1.1vmax'
				// document.getElementById('parametersTitleText').style.height = '10%'

				// document.getElementById('additionalPText').style.fontSize = '0.7vmax'
				
				// document.getElementById('parametersListH').style.fontSize = '0.96vmax'

				// document.getElementById('mainB2HSpacer6').style.height = '1%'

				// $('#infoH').insertAfter('#mainB2HSpacer6')

				// document.getElementById('gradfillParameters').style.background = 'linear-gradient(to bottom,hsla(0, 0%, 0%, 0), hsla(0, 100%, 100%, 0) 8%, hsla(0, 100%, 0%, 1) 10%, hsla(0, 100%, 100%, 0) 14%, hsla(0, 0%, 0%, 0) 88%,hsla(0, 100%, 0%, 1) 100%,hsla(0, 100%, 100%, 0) 100%,hsla(0, 100%, 100%, 0))'
	
			}
		}

		// handleLayout1()

		
		uid = 0
		graphData = {}
		reverseGraphElementMap = {}

		loopcount = 0
		timecount = 0
		playing = true

		frameInterval = 0
		calculationFrameInterval = 0

		function setUpTopBarGraph() {
			graphH = document.getElementById('TopBarGraphH')
			graphoptions = {}
			graphoptions.xmax = 10
			graphoptions.xmin = -10

			graphoptions.ymax = 1
			graphoptions.ymin = -1

			graphoptions.axislocationX = 0
			graphoptions.axislocationY = 0

			graphoptions.xaxislabelvisibility = 'no'
			graphoptions.yaxislabelvisibility = 'no'

			graphoptions.xaxisvisibility= 'no'
			graphoptions.yaxisvisibility = 'no'

			graphoptions.xmajorgridlabelvisibility = 'no'
			graphoptions.ymajorgridlabelvisibility = 'no'

			graphoptions.xmajorgridlinesvisibility = 'no'
			graphoptions.ymajorgridlinesvisibility = 'no'

			graphoptions.fontSize = 1.6
			
			// graphoptions.unitAspectRatio = 'yes'
			graphoptions.fixAxisStretchCentrally = 'yes'

			graphoptions.scrollZoom = 'no'
			graphoptions.draggability = 'no'
			
			addGraph(graphH, 'topBarGraph', graphoptions)

			for (ptk = 0; ptk < 10; ptk++) {
				options = {}
				options.x = -6 + (Math.random()*18)
				options.y = -0.5 + (Math.random()*1.5)
				options.pointsize = 7
				addPoint('topBarGraph', 'normalPT' + ptk, options)
			}

			for (ptk = 0; ptk < 5; ptk++) {
				topxLoc = -6 + (Math.random()*18)
				topyLoc = -0.5 + (Math.random()*1.5)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 16
				options.pointcolor = 'hsla(280, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'susPTc1' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 13
				options.pointcolor = 'hsla(280, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'susPTc2' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 10
				options.pointcolor = 'hsla(280, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'susPTc3' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 7
				options.pointcolor = 'hsla(280, 100%, 50%, 1)'
				addPoint('topBarGraph', 'susPT' + ptk, options)
			}

			for (ptk = 0; ptk < 3; ptk++) {
				topxLoc = -6 + (Math.random()*18)
				topyLoc = -0.5 + (Math.random()*1.5)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 16
				options.pointcolor = 'hsla(2, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'infectPTc1' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 13
				options.pointcolor = 'hsla(2, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'infectPTc2' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 10
				options.pointcolor = 'hsla(2, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'infectPTc3' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 7
				options.pointcolor = 'hsla(2, 100%, 50%, 1)'
				addPoint('topBarGraph', 'infectPT' + ptk, options)
			}

			for (ptk = 0; ptk < 2; ptk++) {
				topxLoc = 3 + (Math.random()*4)
				topyLoc = 0 + (Math.random()*1.2)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 30
				options.pointcolor = 'hsla(2, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'infectLPTc1' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 25
				options.pointcolor = 'hsla(2, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'infectLPTc2' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 20
				options.pointcolor = 'hsla(2, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'infectLPTc3' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 15
				options.pointcolor = 'hsla(2, 100%, 50%, 1)'
				addPoint('topBarGraph', 'infectLPT' + ptk, options)
			}

			for (ptk = 0; ptk < 2; ptk++) {
				topxLoc = 8 + (Math.random()*4)
				topyLoc = 0.2 + (Math.random()*1.5)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 55
				options.pointcolor = 'hsla(280, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'exposeLPTc1' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 45
				options.pointcolor = 'hsla(280, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'exposeLPTc2' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 35
				options.pointcolor = 'hsla(280, 100%, 50%, 0.1)'
				addPoint('topBarGraph', 'exposeLPTc3' + ptk, options)

				options = {}
				options.x = topxLoc
				options.y = topyLoc
				options.pointsize = 25
				options.pointcolor = 'hsla(280, 100%, 50%, 1)'
				addPoint('topBarGraph', 'exposeLPT' + ptk, options)
			}	
		}

		setUpTopBarGraph()

		dayWiseGData = {}

		singleParameterGraphs = {
			borderClose: ['BorderCloseGraph', 'dynaParameterBorderClosingH'], 
			hospitalization: ['HospitalizationGraph', 'dynaParameterHospitalizationH'], 
			lockdown: ['LockdownGraph', 'dynaParameterLockdownH'], 
			quarantine: ['QuarantineGraph', 'dynaParameterQuarantineH'],
			dailytesting: ['DailytestingGraph', 'dynaParameterDailytestingH'],
			contactTracing: ['ContactTracingGraph', 'dynaParameterContactTracingH'],
			socialDistancing: ['SocialDistancingGraph', 'dynaParameterSocialDistancingH'],
			ageBasedLockDown: ['AgeBasedLockDownGraph', 'dynaParameterAgeBasedLockDownH']
		}

		singleParameterGraphMap = {
			'BorderCloseGraph': ['BorderCloseGraph', {}, 'Click to close borders between', 'Borders Closed between ', '190, 100%', 'none'], 
			'HospitalizationGraph' : ['HospitalizationGraph', {}, 'Click to start Hospitalization between', 'Hospitalization is practised between ', '5, 100%', 'none'], 
			'LockdownGraph' : ['LockdownGraph', {}, 'Click to start Lockdown between', 'Lockdown is practised between ', '220, 100%', 'none'],
			'QuarantineGraph' : ['QuarantineGraph', {}, 'Click to start Quarantine Approach between', 'Quarantine Approach is practised between ', '40, 100%', 'none'],
			'DailytestingGraph' : ['DailytestingGraph', {}, 'Click to start Daily Testing Approach between', 'Daily Testing Approach is practised between ', '320, 100%', 'TestingCapacityGraph'],
			'ContactTracingGraph' : ['ContactTracingGraph', {}, 'Click to start Contact Tracing Approach between', 'Contact Tracing is practised between ', '130, 100%', 'none'],
			'SocialDistancingGraph' : ['SocialDistancingGraph', {}, 'Click to start Social Distancing Approach between', 'Social Distancing is practised between ', '180, 100%', 'none'],
			'AgeBasedLockDownGraph' : ['AgeBasedLockDownGraph', {}, 'Click to start Age based lockdown approach between', 'Age based lockdown is practised between ', '280, 100%', 'AgeThresholdGraph']
		}

		timeMax = 150

		function dynaPMouseOut(event) {
			graphReferred = singleParameterGraphMap[event.target.id.split('-')[0]][0]
			updateLine(graphReferred, 'sliderFillInstruct@' + graphReferred, {x1: -100,  y1: 0, x2: -99, y2: 0})
			updatePoint(graphReferred, 'sliderthumbInstructleft@' + graphReferred, {x: -100,  y: 0})
			updatePoint(graphReferred, 'sliderthumbInstructright@' + graphReferred, {x: -99,  y: 0})
			updateText(graphReferred, 'nameDisplay@' + graphReferred, {x: -99,  y: 0, text:''})
			
		}

		function dynaPMouseMove(event) {
			graphReferred = singleParameterGraphMap[event.target.id.split('-')[0]][0]
			if ((event.target.id == "" + graphReferred + "-line-slidertrack@" + graphReferred + "" || event.target.id == "" + graphReferred + ""|| event.target.id == "" + graphReferred + "-line-sliderFillInstruct@" + graphReferred + "" || event.target.id == "" + graphReferred + "-point-sliderthumbInstructleft@" + graphReferred + "" || event.target.id == "" + graphReferred + "-point-sliderthumbInstructright@" + graphReferred + "") && borderAddPT) {
				cursorloc = {x: event.clientX, y: event.clientY}
				if (event.clientX == undefined) {
					cursorloc = {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY}
				}

				moveToLoc = parseInt(getSvgCursorLocation(cursorloc, graphReferred)[0])

				moveConditions = getEndPointData(moveToLoc, graphReferred)
				if (moveConditions[0]) {
					updateLine(graphReferred, 'sliderFillInstruct@' + graphReferred, {x1: moveToLoc,  y1: 0, x2: moveConditions[1], y2: 0})
					updatePoint(graphReferred, 'sliderthumbInstructleft@' + graphReferred, {x: moveToLoc,  y: 0})
					updatePoint(graphReferred, 'sliderthumbInstructright@' + graphReferred, {x: moveConditions[1],  y: 0})
					updateText(graphReferred, 'nameDisplay@' + graphReferred, {x: (moveToLoc + moveConditions[1])/2,  y: 0.6, text: singleParameterGraphMap[graphReferred][2] + ' Day ' + moveToLoc + ' and Day ' + moveConditions[1]})
				}
				else {
					updateLine(graphReferred, 'sliderFillInstruct@' + graphReferred, {x1: -100,  y1: 0, x2: -99, y2: 0})
					updatePoint(graphReferred, 'sliderthumbInstructleft@' + graphReferred, {x: -100,  y: 0})
					updatePoint(graphReferred, 'sliderthumbInstructright@' + graphReferred, {x: -99,  y: 0})
					updateText(graphReferred, 'nameDisplay@' + graphReferred, {x: -99,  y: 0, text:''})
				}
			}
			
				
		}

		function getEndPointData(start_point, toGraph) {
			allowed = true
			toPlaceEnd = timeMax
			placeendset = false
			startPoints = Object.keys(singleParameterGraphMap[toGraph][1]).sort(function(a,b){ return singleParameterGraphMap[toGraph][1][a][0] - singleParameterGraphMap[toGraph][1][b][0]})
			for (start_pIndex = 0; start_pIndex < startPoints.length; start_pIndex++) {
				start_p = singleParameterGraphMap[toGraph][1][startPoints[start_pIndex]][0]
				if (start_point >= (start_p - 1) && start_point <= singleParameterGraphMap[toGraph][1][startPoints[start_pIndex]][1]) {
					allowed = false
					break
				}
				if (start_point < start_p && placeendset == false) {
					if (start_point < start_p - 1) {
						toPlaceEnd = start_p - 1
					}
					placeendset = true
				}
			}

			if (start_point >= timeMax || start_point < 0) {
				allowed = false
			}

			return [allowed, toPlaceEnd]
		}

		function handledynaPDrag(graphNR, knobType, knobName, location_x) {
			graphNR = singleParameterGraphMap[graphNR.id.split('-')[0]][0]
			location_x = parseInt(location_x)
			if (knobType == 'left') {
				singleParameterGraphMap[graphNR][1][knobName][0] = location_x
				updateLine(graphNR, 'sliderFill@' + knobName + '@' + graphNR, {x1: singleParameterGraphMap[graphNR][1][knobName][0], y1: 0, x2: singleParameterGraphMap[graphNR][1][knobName][1], y2: 0})
			}
			else if (knobType == 'right') {
				singleParameterGraphMap[graphNR][1][knobName][1] = location_x
				updateLine(graphNR, 'sliderFill@' + knobName + '@' + graphNR, {x1: singleParameterGraphMap[graphNR][1][knobName][0], y1: 0, x2: singleParameterGraphMap[graphNR][1][knobName][1], y2: 0})
			}
			moveX = parseInt(moveX)
			calculateDayWise(graphNR)
			if (singleParameterGraphMap[graphNR][5] != 'none') {
				drawAllLinesAndPointsVS(singleParameterGraphMap[graphNR][5])
			}
			
		}


		function calculateDayWise(graph_n) {
			for (day in dayWiseGData[graph_n]) {
				dayWiseGData[graph_n][day] = 0
			}
			for (varkey in singleParameterGraphMap[graph_n][1]) {
				for (dayS = singleParameterGraphMap[graph_n][1][varkey][0]; dayS <= singleParameterGraphMap[graph_n][1][varkey][1]; dayS++) {
					dayWiseGData[graph_n][dayS] = 1
				}
			}
		}


		function handleDynaPDragIf(graphNR, knobType, knobName, location_x) {
			graphNR = singleParameterGraphMap[graphNR.id.split('-')[0]][0]
			location_x = parseInt(location_x)
			if (knobType == 'left') {
				allowedRange = [singleParameterGraphMap[graphNR][1][knobName][0], singleParameterGraphMap[graphNR][1][knobName][1] - 1]
				startPoints = Object.keys(singleParameterGraphMap[graphNR][1]).sort(function(a,b){ return singleParameterGraphMap[graphNR][1][a][0] - singleParameterGraphMap[graphNR][1][b][0]})
				getprevIndex = startPoints.length - 2

				currentknob = startPoints.indexOf(knobName.toString())

				if (currentknob == 0) {
					allowedRange = [0, allowedRange[1]]
				}
				else {
					allowedRange = [singleParameterGraphMap[graphNR][1][startPoints[currentknob - 1]][1], allowedRange[1]]
				}

				if (location_x > allowedRange[0] && location_x <= allowedRange[1]) {
					return true
				}
				else {
					return false
				}
			}
			else if (knobType == 'right') {
				allowedRange = [singleParameterGraphMap[graphNR][1][knobName][0] + 1, timeMax]
				startPoints = Object.keys(singleParameterGraphMap[graphNR][1]).sort(function(a,b){ return singleParameterGraphMap[graphNR][1][b][0] - singleParameterGraphMap[graphNR][1][a][0]})

				currentknob = startPoints.indexOf(knobName.toString())
				
				if (currentknob == 0) {
					allowedRange = [allowedRange[0], timeMax + 1]
				}
				else {
					allowedRange = [allowedRange[0], singleParameterGraphMap[graphNR][1][startPoints[currentknob - 1]][0]]
				}

				if (location_x >= allowedRange[0] && location_x < allowedRange[1]) {
					return true
				}
				else {
					return false
				}
			}
		}

		function displayDynaPData(event) {
			graphReferred = singleParameterGraphMap[event.target.id.split('-')[0]][0]
			cursorloc = {x: event.clientX, y: event.clientY}
			if (event.clientX == undefined) {
				cursorloc = {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY}
			}
			eventLoc = parseInt(getSvgCursorLocation(cursorloc, graphReferred)[0])

			for (var ptspacekey in singleParameterGraphMap[graphReferred][1]) {
				if (eventLoc >= singleParameterGraphMap[graphReferred][1][ptspacekey][0] && eventLoc <= singleParameterGraphMap[graphReferred][1][ptspacekey][1]) {
					updateText(graphReferred, 'nameDisplay@' + graphReferred, {x: (singleParameterGraphMap[graphReferred][1][ptspacekey][0] + singleParameterGraphMap[graphReferred][1][ptspacekey][1])/2,  y: 0.6, text: singleParameterGraphMap[graphReferred][3] + 'Day ' + singleParameterGraphMap[graphReferred][1][ptspacekey][0] + ' and Day ' + singleParameterGraphMap[graphReferred][1][ptspacekey][1]})
					updateText(graphReferred, 'remove@' + graphReferred, {x: (singleParameterGraphMap[graphReferred][1][ptspacekey][0] + singleParameterGraphMap[graphReferred][1][ptspacekey][1])/2,  y: -0.8, text: 'REMOVE'})
					break
				}
			}
		}


		function displayDynaPDataOut(event) {
			graphReferred = singleParameterGraphMap[event.target.id.split('-')[0]][0]
			updateText(graphReferred, 'nameDisplay@' + graphReferred, {x: -99,  y: 0, text:''})
			updateText(graphReferred, 'remove@' + graphReferred, {x: -99,  y: 0, text:''})
		}

		borderAddPT = true
		pUid = 0

		function addDynaPPoint(event) {
			graphReferred = singleParameterGraphMap[event.target.id.split('-')[0]][0]
			if (event.target.id != graphReferred + "-text-remove@" + graphReferred) {
				cursorloc = {x: event.clientX, y: event.clientY}
				if (event.clientX == undefined) {
					cursorloc = {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY}
				}

				moveToLoc = parseInt(getSvgCursorLocation(cursorloc, graphReferred)[0])
				moveConditions = getEndPointData(moveToLoc, graphReferred)
				if (moveConditions[0] && borderAddPT) {
					pUid = pUid + 1
					lineadded = addLine(graphReferred, 'sliderFill@' + pUid + '@' + graphReferred, {x1: moveToLoc, y1: 0, x2: moveConditions[1], y2: 0, linecolor: 'hsla(' + singleParameterGraphMap[graphReferred][4] +', 50%, 1)', strokewidth: 4})[0]

					addedpt = addPoint(graphReferred, 'sliderthumbleft@' + pUid + '@' + graphReferred, {x: moveToLoc, y: 0, pointcolor: 'hsla(' + singleParameterGraphMap[graphReferred][4] +', 50%, 1)', pointsize: 10, dragDirection: 'onlyX', draggability: 'yes', dragIfCondition: 'handleDynaPDragIf(' + graphReferred + ',"left", ' + pUid + ', moveX)', runFunctionDuringDrag: 'handledynaPDrag(' + graphReferred + ',"left", ' + pUid + ', moveX)', runFunctionOnDragStart: 'borderAddPT = false'})[0]
					addedpt.style.cursor = 'ew-resize'

					addedpt = addPoint(graphReferred, 'sliderthumbright@' + pUid + '@' + graphReferred, {x: moveConditions[1], y: 0, pointcolor: 'hsla(' + singleParameterGraphMap[graphReferred][4] +', 50%, 1)', pointsize: 10, dragDirection: 'onlyX', draggability: 'yes', dragIfCondition: 'handleDynaPDragIf(' + graphReferred + ',"right", ' + pUid + ', moveX)', runFunctionDuringDrag: 'handledynaPDrag(' + graphReferred + ',"right", ' + pUid + ', moveX)', runFunctionOnDragStart: 'borderAddPT = false'})[0]
					addedpt.style.cursor = 'ew-resize'

					singleParameterGraphMap[graphReferred][1][pUid] = [moveToLoc ,moveConditions[1]]

					for (dayval = moveToLoc; dayval <= moveConditions[1]; dayval++) {
						dayWiseGData[graphReferred][dayval] = 1
					}

					if (singleParameterGraphMap[graphReferred][5] != 'none') {
						drawAllLinesAndPointsVS(singleParameterGraphMap[graphReferred][5])
					}

				}

				if (borderAddPT == false) {
					borderAddPT = true
				}
			}
		}

		function removeBorderClosePoint(event) {
			graphReferred = singleParameterGraphMap[event.target.id.split('-')[0]][0]
			cursorloc = {x: event.clientX, y: event.clientY}
			if (event.clientX == undefined) {
				cursorloc = {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY}
			}
			eventLoc = parseInt(getSvgCursorLocation(cursorloc, graphReferred)[0])

			for (var ptspacekey in singleParameterGraphMap[graphReferred][1]) {
				if (eventLoc >= singleParameterGraphMap[graphReferred][1][ptspacekey][0] && eventLoc <= singleParameterGraphMap[graphReferred][1][ptspacekey][1]) {
					for (dayval = singleParameterGraphMap[graphReferred][1][ptspacekey][0]; dayval <= singleParameterGraphMap[graphReferred][1][ptspacekey][1]; dayval++) {
						dayWiseGData[graphReferred][dayval] = 0
					}

					if (singleParameterGraphMap[graphReferred][5] != 'none') {
						drawAllLinesAndPointsVS(singleParameterGraphMap[graphReferred][5])
					}

					delete singleParameterGraphMap[graphReferred][1][ptspacekey]
					removeLine(graphReferred, 'sliderFill@' + ptspacekey + '@' + graphReferred)
					removePoint(graphReferred, 'sliderthumbleft@' + ptspacekey + '@' + graphReferred)
					removePoint(graphReferred, 'sliderthumbright@' + ptspacekey + '@' + graphReferred)
				}
			}

			updateText(graphReferred, 'nameDisplay@' + graphReferred, {x: -99,  y: 0, text:''})
			updateText(graphReferred, 'remove@' + graphReferred, {x: -99,  y: 0, text:''})
		}

		function setUpDynaPGraphs() {
			for (gph in singleParameterGraphs) {
				graphH = document.getElementById(singleParameterGraphs[gph][1])
				graphoptions = {}
				graphoptions.xmax = timeMax
				graphoptions.xmin = 0

				graphoptions.ymax = 1
				graphoptions.ymin = -1

				graphoptions.axislocationX = 0
				graphoptions.axislocationY = 0

				graphoptions.xaxislabelvisibility = 'no'
				graphoptions.yaxislabelvisibility = 'no'

				graphoptions.xaxisvisibility= 'no'
				graphoptions.yaxisvisibility = 'no'

				graphoptions.xmajorgridlabelvisibility = 'no'
				graphoptions.ymajorgridlabelvisibility = 'no'

				graphoptions.xmajorgridlinesvisibility = 'no'
				graphoptions.ymajorgridlinesvisibility = 'no'

				graphoptions.fontSize = 8
				
				// graphoptions.unitAspectRatio = 'yes'
				// graphoptions.fixAxisStretchCentrally = 'yes'

				graphoptions.scrollZoom = 'no'
				graphoptions.draggability = 'no'
				
				graphAdded = addGraph(graphH, singleParameterGraphs[gph][0], graphoptions)
				graphAdded.svgElement.addEventListener('mousemove', dynaPMouseMove)
				graphAdded.svgElement.addEventListener('click', addDynaPPoint)
				graphAdded.svgElement.addEventListener('touchmove', dynaPMouseMove)
				graphAdded.svgElement.addEventListener('touchend', dynaPMouseOut)
				graphAdded.svgElement.addEventListener('touchcancel', dynaPMouseOut)
				graphAdded.svgElement.addEventListener('mouseout', dynaPMouseOut)
				graphAdded.svgElement.style.cursor = 'pointer'
				graphAdded.svgElement.style.pointerEvents = 'auto'

				graphAdded.svgElement.addEventListener('mousemove', displayDynaPData)
				graphAdded.svgElement.addEventListener('touchmove', displayDynaPData)

				graphAdded.svgElement.addEventListener('mouseout', displayDynaPDataOut)
				graphAdded.svgElement.addEventListener('touchend', displayDynaPDataOut)
				graphAdded.svgElement.addEventListener('touchcancel', displayDynaPDataOut)

				addLine(singleParameterGraphs[gph][0], 'slidertrack@' + singleParameterGraphs[gph][0], {x1: 0,  y1: 0, x2: timeMax, y2: 0, linecolor: 'hsla(0, 0%, 80%, 1)', strokewidth: 4})


				addLine(singleParameterGraphs[gph][0], 'sliderFillInstruct@' + singleParameterGraphs[gph][0], {x1: -100,  y1: 0, x2: -99, y2: 0, linecolor: 'hsla(' + singleParameterGraphMap[singleParameterGraphs[gph][0]][4] + ', 90%, 1)', strokewidth: 4})
				
				pointadded = addPoint(singleParameterGraphs[gph][0], 'sliderthumbInstructleft@' + singleParameterGraphs[gph][0], {x: -100,  y: 0, pointcolor: 'hsla(' + singleParameterGraphMap[singleParameterGraphs[gph][0]][4] + ', 80%, 1)', pointsize: 10})

				pointadded = addPoint(singleParameterGraphs[gph][0], 'sliderthumbInstructright@' + singleParameterGraphs[gph][0], {x: -99,  y: 0, pointcolor: 'hsla(' + singleParameterGraphMap[singleParameterGraphs[gph][0]][4] + ', 80%, 1)', pointsize: 10})

				addText(singleParameterGraphs[gph][0], 'nameDisplay@' + singleParameterGraphs[gph][0], {x: -100, y: 0, text: '', textAlign: 'center', fontSize: "1.3vmax", textcolor: 'hsla(' + singleParameterGraphMap[singleParameterGraphs[gph][0]][4] + ', 30%, 1)'})

				addedTXT = addText(singleParameterGraphs[gph][0], 'remove@' + singleParameterGraphs[gph][0], {x: -100, y: 0, text: '', textAlign: 'center', fontSize: "1.3vmax", textcolor: 'hsla(2, 0%, 0%, 1)'})[0]
				addedTXT.style.fontWeight = 'bold'
				addedTXT.addEventListener('click', removeBorderClosePoint)

				dayWiseGData[singleParameterGraphs[gph][0]] = {}
				for (dayval = 0; dayval <= timeMax; dayval++) {
					dayWiseGData[singleParameterGraphs[gph][0]][dayval] = 0
				}
			}
				

		}

		setUpDynaPGraphs()


		vslideGs = {
			'AgeThresholdGraph': ['dynaParameterAgeThresholdH', 
			'none', 
			{}, 
			' : Alowed to move if below age ',
			'none',
			true,
			'AgeBasedLockDownGraph',
			60,
			5,
			100,
			'280, 100%'], 
			'TestingCapacityGraph': ['dynaParameterTestingCapacityH', 
			'none', 
			{}, 
			' : Tests per day are ',
			'none',
			true,
			'DailytestingGraph',
			5,
			0,
			100,
			'320, 100%'],
			'ICUBedsGraph': ['dynaParameterICUBedsH', 
			'none', 
			{}, 
			' : New ICU beds are ',
			'none',
			true,
			'none',
			0,
			0,
			500,
			'2, 100%'],
			'HBedsGraph': ['dynaParameterHBedsH', 
			'none', 
			{}, 
			' : New Hospital beds are ',
			'none',
			true,
			'none',
			0,
			0,
			500,
			'2, 100%']
		}

		function vSMouseOut(event) {
			graphVS = event.target.id.split('-')[0]
			for (dayp = 0; dayp <= timeMax; dayp++) {
				graphData[graphVS].pointData['knob@' + dayp + '@' + graphVS][0].setAttribute('rx','1.5%')
				graphData[graphVS].pointData['knob@' + dayp + '@' + graphVS][0].setAttribute('ry', '1.5%');
			}

			updateText(graphVS, 'valueDisplayText@' + graphVS,  {x: -100 , y: 0, text: ''})
		}

		function vSMouseMove(event) {
			graphVS = event.target.id.split('-')[0]
			if (vslideGs[graphVS][1] == 'none') {
				cursorloc = {x: event.clientX, y: event.clientY}
				if (event.clientX == undefined) {
					cursorloc = {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY}
				}

				eventLoc = getSvgCursorLocation(cursorloc, graphVS)

				for (dayp = 0; dayp <= timeMax; dayp++) {
					graphData[graphVS].pointData['knob@' + dayp + '@' + graphVS][0].setAttribute('rx','1.5%')
					graphData[graphVS].pointData['knob@' + dayp + '@' + graphVS][0].setAttribute('ry', '1.5%');
				}

				xloc = parseInt(eventLoc[0] + 0.5)

				if (vslideGs[graphVS][2][xloc] != undefined) {
					graphData[graphVS].pointData['knob@' + xloc + '@' + graphVS][0].setAttribute('rx','3%')
					graphData[graphVS].pointData['knob@' + xloc + '@' + graphVS][0].setAttribute('ry', '3%');
					transformedFactorV = vslideGs[graphVS][2][xloc]
					updateText(graphVS, 'valueDisplayText@' + graphVS,  {x: xloc, y: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][xloc]) + 17, text: 'Day ' + xloc + vslideGs[graphVS][3] + transformedFactorV + '.'})
				}	
			}
			else {
				graphData[graphVS].pointData['knob@' + vslideGs[graphVS][4] + '@' + graphVS][0].setAttribute('rx','3%')
				graphData[graphVS].pointData['knob@' + vslideGs[graphVS][4] + '@' + graphVS][0].setAttribute('ry', '3%');
				transformedFactorV = vslideGs[graphVS][2][vslideGs[graphVS][4]]
				updateText(graphVS, 'valueDisplayText@' + graphVS,  {x: vslideGs[graphVS][4] , y: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100,vslideGs[graphVS][2][vslideGs[graphVS][4]]) + 17, text: 'Day ' + vslideGs[graphVS][4]  + vslideGs[graphVS][3] + transformedFactorV + '.'})
			}

		}

		function drawAllLinesAndPointsVS(linkGraph) {
			graphVS = linkGraph
			for (var dayp in vslideGs[graphVS][2]) {
				dayp = parseInt(dayp) 
				if (dayp != timeMax) {
					if (vslideGs[graphVS][6] != 'none') {
						if (dayWiseGData[vslideGs[graphVS][6]][dayp] == 1) {
							updateLine(linkGraph, 'knobLine@' + dayp + '@' + (dayp + 1) + '@' + linkGraph, {x1: dayp,  y1: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp]), x2: dayp + 1, y2: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp + 1]), linecolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)'})
						}
						else {
							updateLine(linkGraph, 'knobLine@' + dayp + '@' + (dayp + 1) + '@' + linkGraph, {x1: dayp,  y1: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp]), x2: dayp + 1, y2: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp + 1]), linecolor: 'grey'})
						}
					}
					else {
						updateLine(linkGraph, 'knobLine@' + dayp + '@' + (dayp + 1) + '@' + linkGraph, {x1: dayp,  y1: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp]), x2: dayp + 1, y2: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp + 1]), linecolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)'})
					}
						
				}

				if (vslideGs[graphVS][6] != 'none') {
					if (dayWiseGData[vslideGs[graphVS][6]][dayp] == 1) {
						updatePoint(linkGraph, 'knob@' + dayp + '@' + linkGraph, {pointcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)'})
					}
					else {
						updatePoint(linkGraph, 'knob@' + dayp + '@' + linkGraph, {pointcolor: 'grey'})
					}

					updatePointXY(linkGraph, 'knob@' + dayp + '@' + linkGraph, dayp, linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp]))
				}
				else {
					updatePoint(linkGraph, 'knob@' + dayp + '@' + linkGraph, {pointcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)'})
					updatePointXY(linkGraph, 'knob@' + dayp + '@' + linkGraph, dayp, linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, vslideGs[graphVS][2][dayp]))

				}

			}
		}

		function knobVSMove(knobXv, knobYv) {
			vslideGs[graphVS][4] = parseInt(vslideGs[graphVS][4])
			knobYv = linearValue(0, 100, vslideGs[graphVS][8], vslideGs[graphVS][9] , knobYv)
			knobYv = parseInt(knobYv)

			if (vslideGs[graphVS][5]) {
				for (dayp = vslideGs[graphVS][4]; dayp <= timeMax; dayp++) {
					vslideGs[graphVS][2][dayp] = knobYv
				}
				drawAllLinesAndPointsVS(graphVS)
			}
			else {
				vslideGs[graphVS][2][vslideGs[graphVS][4]] = knobYv
				drawAllLinesAndPointsVS(graphVS)
			} 
			
		}

		function knobVSMoveIf(knobYv, glink) {
			graphVS = glink
			if (knobYv >= -1 && knobYv < 101) {
				if (linearValue(0, 100, vslideGs[graphVS][8], vslideGs[graphVS][9], knobYv) >= vslideGs[graphVS][8] && linearValue(0, 100, vslideGs[graphVS][8], vslideGs[graphVS][9], knobYv) <= vslideGs[graphVS][9]) {
					return true
				}
			}
			else {
				return false
			}
		}

		function toggleDraggingVS(event) {
			graphVS = event.target.id.split('-')[0]
			if (vslideGs[graphVS][5] == true) {
				vslideGs[graphVS][5] = false
				updateText(graphVS, 'dragAllPointsTillEnd@' + graphVS,  {textcolor: 'grey', text: 'Click here to turn on dragging all points till the end'})
			}
			else {
				vslideGs[graphVS][5] = true
				updateText(graphVS, 'dragAllPointsTillEnd@' + graphVS,  {textcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)', text: 'Click here to turn off dragging all points till the end'})
			}
		}

		function setUpVSGraphs() {
			for (var graphVS in vslideGs) {
				graphH = document.getElementById(vslideGs[graphVS][0])
				graphoptions = {}
				graphoptions.xmax = timeMax
				graphoptions.xmin = 0

				graphoptions.ymax = 110
				graphoptions.ymin = -20

				graphoptions.axislocationX = 0
				graphoptions.axislocationY = 0

				graphoptions.xaxislabelvisibility = 'no'
				graphoptions.yaxislabelvisibility = 'no'

				graphoptions.xaxisvisibility= 'no'
				graphoptions.yaxisvisibility = 'no'

				graphoptions.xmajorgridlabelvisibility = 'no'
				graphoptions.ymajorgridlabelvisibility = 'no'

				graphoptions.xmajorgridlinesvisibility = 'no'
				graphoptions.ymajorgridlinesvisibility = 'no'

				graphoptions.fontSize = 8
				

				graphoptions.scrollZoom = 'no'
				graphoptions.draggability = 'no'
				
				graphAdded = addGraph(graphH, graphVS, graphoptions)

				graphAdded.svgElement.addEventListener('mousemove', vSMouseMove)
				graphAdded.svgElement.addEventListener('mouseout', vSMouseOut)
				graphAdded.svgElement.style.cursor = 'auto'
				graphAdded.svgElement.style.pointerEvents = 'auto'

				addText(graphVS, 'valueDisplayText@' + graphVS,  {x: -100, y: 0, text: '', textAlign: 'center', fontSize: "0.37vmax", textcolor: 'hsla(0, 0%, 0%, 1)'})

				addedText = addText(graphVS, 'dragAllPointsTillEnd@' + graphVS,  {x: 50, y: -20, text: 'Click here to turn off dragging all points till the end', textAlign: 'center', fontSize: "0.37vmax", textcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)'})[0]
				addedText.style.fontWeight = 'bold'
				addedText.style.cursor = 'pointer'
				addedText.addEventListener('click', toggleDraggingVS)

				for (dayp = 0; dayp <= timeMax; dayp++) {
					if (dayp != timeMax) {
						if (vslideGs[graphVS][6] != 'none') {
							if (dayWiseGData[vslideGs[graphVS][6]][dayp] == 1) {
								addLine(graphVS, 'knobLine@' + dayp + '@' + (dayp + 1) + '@' + graphVS, {x1: dayp,  y1: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), x2: dayp + 1, y2: vslideGs[graphVS][7], linecolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)', strokewidth: 2})
							}
							else {
								addLine(graphVS, 'knobLine@' + dayp + '@' + (dayp + 1) + '@' + graphVS, {x1: dayp,  y1: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), x2: dayp + 1, y2: vslideGs[graphVS][7], linecolor: 'grey', strokewidth: 2})
							}
						}
						else {
							addLine(graphVS, 'knobLine@' + dayp + '@' + (dayp + 1) + '@' + graphVS, {x1: dayp,  y1: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), x2: dayp + 1, y2: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), linecolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)', strokewidth: 2})
						} 
							
					}
				}

				for (dayp = 0; dayp <= timeMax; dayp++) {
					vslideGs[graphVS][2][dayp] = vslideGs[graphVS][7]
					if (vslideGs[graphVS][6] != 'none') {
						if (dayWiseGData[vslideGs[graphVS][6]][dayp] == 1) {
							pointadded = addPoint(graphVS, 'knob@' + dayp + '@' + graphVS, {x: dayp,  y: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), pointcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)', pointsize: 1.5, draggability: 'yes', dragDirection:'onlyY', runFunctionDuringDrag: 'knobVSMove(moveX, moveY)', dragIfCondition: 'knobVSMoveIf(moveY,"' + graphVS + '")', runFunctionOnDragStart: 'vslideGs["' + graphVS + '"][4] = ' + dayp, runFunctionOnDragEnd: 'vslideGs["' + graphVS+ '"][4] = "none"'})[0]
						}
						else {
							pointadded = addPoint(graphVS, 'knob@' + dayp + '@' + graphVS, {x: dayp,  y: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), pointcolor: 'grey', pointsize: 1.5, draggability: 'yes', dragDirection:'onlyY', runFunctionDuringDrag: 'knobVSMove(moveX, moveY)', dragIfCondition: 'knobVSMoveIf(moveY,"' + graphVS + '")', runFunctionOnDragStart: 'vslideGs["' + graphVS+ '"][4] = ' + dayp, runFunctionOnDragEnd: 'vslideGs["' + graphVS+ '"][4] = "none"'})[0]
						}
						pointadded.style.cursor = 'ns-resize'
						pointadded.style.pointerEvents = 'auto'
					}
					else {
						pointadded = addPoint(graphVS, 'knob@' + dayp + '@' + graphVS, {x: dayp,  y: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9], 0, 100, vslideGs[graphVS][7]), pointcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)', pointsize: 1.5, draggability: 'yes', dragDirection:'onlyY', runFunctionDuringDrag: 'knobVSMove(moveX, moveY)', dragIfCondition: 'knobVSMoveIf(moveY,"' + graphVS + '")', runFunctionOnDragStart: 'vslideGs["' + graphVS+ '"][4] = ' + dayp, runFunctionOnDragEnd: 'vslideGs["' + graphVS+ '"][4] = "none"'})[0]
						pointadded.style.cursor = 'ns-resize'
						pointadded.style.pointerEvents = 'auto'
					}

				}

				addRectangle(graphVS, 'boundRect@' + graphVS, {x: -2, y:100, w: timeMax + 4, h: 100, rectcolor: 'none', stroke: 'black', strokewidth: 1})

				valueStart = vslideGs[graphVS][8]
				valueEnd = vslideGs[graphVS][9]
				for (valueY = valueStart; valueY <= valueEnd; valueY = valueY + (valueEnd - valueStart)/5) {
					addedText = addText(graphVS, parseInt(valueY) + '@yText@' + graphVS,  {x: -4, y: linearValue(vslideGs[graphVS][8], vslideGs[graphVS][9] , 0, 100, valueY), text: valueY.toFixed(0), textAlign: 'center', fontSize: "0.3vmax", textcolor: 'hsla(' + vslideGs[graphVS][10] + ', 50%, 1)'})[0]
					addedText.style.fontWeight = 'bold'
				}
			}

		}

		setUpVSGraphs()


		function setUpTimeGraphs() {
			graphH = document.getElementById('dynaParameterTimeGraphH')
			graphoptions = {}
			graphoptions.xmax = timeMax
			graphoptions.xmin = 0

			graphoptions.ymax = 1
			graphoptions.ymin = -1

			graphoptions.axislocationX = 0
			graphoptions.axislocationY = 0

			graphoptions.xaxislabelvisibility = 'no'
			graphoptions.yaxislabelvisibility = 'no'

			graphoptions.xaxisvisibility= 'no'
			graphoptions.yaxisvisibility = 'no'

			graphoptions.xmajorgridlabelvisibility = 'no'
			graphoptions.ymajorgridlabelvisibility = 'no'

			graphoptions.xmajorgridlinesvisibility = 'no'
			graphoptions.ymajorgridlinesvisibility = 'no'

			graphoptions.fontSize = 8
			

			graphoptions.scrollZoom = 'no'
			graphoptions.draggability = 'no'
			
			addGraph(graphH, 'timePGraph', graphoptions)

			timePvalues = 10
			for (tval = 0; tval <= timeMax; tval = tval + (timeMax/timePvalues)) {
				addText('timePGraph', 'tpvalue@' + tval,  {x: tval, y: 0, text: parseInt(tval), textAlign: 'center', fontSize: "1.6vmax", textcolor: 'hsla(0, 0%, 0%, 1)'})
			}
		}

		setUpTimeGraphs()


		function setUpOverlayGraph() {
			graphH = document.getElementById('dynaFullGraphH')
			graphoptions = {}
			graphoptions.xmax = timeMax
			graphoptions.xmin = 0

			graphoptions.ymax = 100
			graphoptions.ymin = -1

			graphoptions.axislocationX = 0
			graphoptions.axislocationY = 0

			graphoptions.xaxislabelvisibility = 'no'
			graphoptions.yaxislabelvisibility = 'no'

			graphoptions.xaxisvisibility= 'no'
			graphoptions.yaxisvisibility = 'no'

			graphoptions.xmajorgridlabelvisibility = 'no'
			graphoptions.ymajorgridlabelvisibility = 'no'

			graphoptions.xmajorgridlinesvisibility = 'no'
			graphoptions.ymajorgridlinesvisibility = 'no'

			graphoptions.fontSize = 8
			

			graphoptions.scrollZoom = 'no'
			graphoptions.draggability = 'no'
			
			addGraph(graphH, 'dynaFullGraph', graphoptions)

			addLine('dynaFullGraph', 'showline',  {x1: -100, y1: 0, x2: -200, y2: 100, linecolor: 'hsla(0, 0%, 10%, 0.7)', strokedasharray: [5, 5]})

			// timePvalues = 10
			// for (tval = 0; tval <= timeMax; tval = tval + (timeMax/timePvalues)) {
			// 	addLine('dynaFullGraph', 'tpline@' + tval,  {x1: tval, y1: 0, x2: tval, y2: 100, linecolor: 'hsla(0, 0%, 10%, 0.1)'})
			// }
		}

		setUpOverlayGraph()

		plotMax = 1000


		plotDataParameters = {infected_agents: {color: 'hsla(2, 100%, 50%, 1)'},  exposed_agents:{color: 'hsla(320, 100%, 50%, 1)'}, recovered_agents:{color: 'hsla(280, 100%, 50%, 1)'}, dead_agents:{color: 'hsla(280, 0%, 50%, 1)'}, asympt_agents:{color: 'hsla(230, 100%, 50%, 1)'}, suscept_agents:{color: 'hsla(190, 100%, 50%, 1)'}}

		plotData = {infected_agents: [],  exposed_agents:[], recovered_agents:[], dead_agents:[], asympt_agents:[], suscept_agents:[]}

		function generateDummy() {
			for (dayV = 0; dayV <= timeMax; dayV++) {
				plotData['infected_agents'].push([dayV, Math.random()*40 + 200*Math.exp(-1*Math.pow((dayV - 60), 2)/200)])
				plotData['exposed_agents'].push([dayV, Math.random()*40 + 700*Math.exp(-1*Math.pow((dayV - 30), 2)/100)])
				plotData['recovered_agents'].push([dayV, Math.random()*50 + 700*Math.exp(-1*Math.pow((dayV - 40), 2)/100)])
				plotData['dead_agents'].push([dayV, Math.random()*20 + 200*Math.exp(-1*Math.pow((dayV - 44), 2)/100)])
				plotData['asympt_agents'].push([dayV, Math.random()*20 + 200*Math.exp(-1*Math.pow((dayV - 44), 2)/100)])
				plotData['suscept_agents'].push([dayV, Math.random()*70 + 900*Math.exp(-1*Math.pow((dayV + 10), 2)/2000)])
			}
		}

		generateDummy()

		function plotMoveOutHandle(event) {
			updateLine('dynaFullGraph', 'showline',  {x1: -100, y1: 0, x2: -200, y2: 100})
		}

		function plotMoveHandle(event) {
			cursorloc = {x: event.clientX, y: event.clientY}
			if (event.clientX == undefined) {
				cursorloc = {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY}
			}

			eventLoc = getSvgCursorLocation(cursorloc, 'plotG')
			if (eventLoc[0] >= 0 && eventLoc[0] <= timeMax) {
				updateLine('dynaFullGraph', 'showline',  {x1: eventLoc[0], y1: -10, x2: eventLoc[0], y2: 200})
			}
			
		}

		function setUpPlotGraphs() {
			graphH = document.getElementById('plotGH')
			graphoptions = {}
			graphoptions.xmax = timeMax
			graphoptions.xmin = 0

			graphoptions.ymax = plotMax
			graphoptions.ymin = -1

			graphoptions.axislocationX = 0
			graphoptions.axislocationY = 0

			// graphoptions.xaxislabelvisibility = 'no'
			graphoptions.xaxislabel = '&nbsp&nbsp   (Days)'
			graphoptions.yaxislabelvisibility = 'no'

			graphoptions.xaxisvisibility= 'no'
			graphoptions.yaxisvisibility = 'no'

			graphoptions.ymajorgridlabelOnlyIf = 'value >= 0'
			graphoptions.ymajorgridlabelshift = -8
			graphoptions.xmajorgridlabelshift = 2

			// graphoptions.xmajorgridlabelvisibility = 'no'
			// graphoptions.ymajorgridlabelvisibility = 'no'

			graphoptions.xmajorgridlinesvisibility = 'no'
			graphoptions.ymajorgridlinesvisibility = 'no'

			graphoptions.fontSize = 2
			

			graphoptions.scrollZoom = 'no'
			graphoptions.draggability = 'no'
			
			gAdded = addGraph(graphH, 'plotG', graphoptions)

			gAdded.svgElement.addEventListener('mousemove', plotMoveHandle)
			gAdded.svgElement.addEventListener('mouseout', plotMoveOutHandle)
			gAdded.svgElement.style.pointerEvents = 'auto'

			addLine('plotG', 'xAxesLine',  {x1: 0, y1: 0, x2: timeMax, y2: 0, linecolor: 'hsla(0, 0%, 0%, 1)'})
			addLine('plotG', 'yAxesLine',  {x1: 0, y1: 0, x2: 0, y2: plotMax, linecolor: 'hsla(0, 0%, 0%, 1)'})

			for (plotcase in plotDataParameters) {
				if (plotcase != 'hospital_beds' && plotcase != 'icu_beds' && plotcase != 'avg_infection') {
					addedPath = addPath('plotG', plotcase + '@path', {pathcolor: plotDataParameters[plotcase].color, points: [[-100, 0], [-100, 1]], strokewidth: 0.3})[0]
				}
				else {
					addedPath = addPath('plotG', plotcase + '@path', {pathcolor: plotDataParameters[plotcase].color, points: [[-100, 0], [-100, 1]], strokewidth: 0.3, strokedasharray: [0.5, 0.6]})[0]
				}
				
			}

		}

		setUpPlotGraphs()


		function updatePlot(pCase) {
			updatePathPoints('plotG', pCase + '@path', plotData[pCase])
		}


		function graphCheck(event) {
			if (document.getElementById(event.target.id).checked) {
				updatePlot(event.target.id)
			}
			else {
				updatePathPoints('plotG', event.target.id + '@path', [[-100, 0], [-100, 1]])
			}
		}

		for (defCase in plotData) {
			if (defCase == 'infected_agents' || defCase == 'asympt_agents' || defCase == 'recovered_agents') {
				document.getElementById(defCase).checked = true
				updatePlot(defCase)
			}
			else {
				document.getElementById(defCase).checked = false
			}
				
		}










		divSlider('parameter1SliderH', 'Slider', 0.00001, 0.001, 0.0001, 0.000001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter2SliderH', 'Slider', 0.001, 2, 0.1, 0.0001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter3SliderH', 'Slider', 0.005, 1, 0.05, 0.001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter4SliderH', 'Slider', 0, 1, 0, 0.0001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter5SliderH', 'Slider', 0, 120, 1, 0.01, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter6SliderH', 'Slider', 0, 120, 90, 0.01, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter7SliderH', 'Slider', 0, 120, 25, 0.01, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter8SliderH', 'Slider', 0, 1, 0.5, 0.001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter9SliderH', 'Slider', 1, 10, 1, 0.01, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter10SliderH', 'Slider', 0, 1, 0.05, 0.001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter11SliderH', 'Slider', 0, 1, 0.3, 0.001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter12SliderH', 'Slider', 0, 100, 5, 0.01, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')
		divSlider('parameter13SliderH', 'Slider', 0, 1, 0.6, 0.001, 'console.log("A")', '100%', '5px', 'hsla(0, 0%, 92%, 1)', '16px', 'hsla(190, 100%, 50%, 1)', '')

		
		function moveParticles(ofBoundary) {
		}

		function animateParticles(ofBoundary) {
		}

		

		function handleCalculationPlaying() {
			
		}

		function handleAnimationPlaying() {
		}


		function setAnimationDetails() {
			frameInterval = (1000/simulationParameters.frameRate)

			calculationFrameInterval = (simulationParameters.frameRate/(timeStepsPerDay*simulationParameters.daysEverySecond))*frameInterval
		}

		// setAnimationDetails()


		function playAnimationLoop(event) {
			loopinterval = setInterval(frame, frameInterval);
			function frame() {
				loopcount = loopcount + 1
				if (playing) {
					handleAnimationPlaying()
				}
			}
		}

		function playCalculationLoop(event) {
			loopinterval2 = setInterval(frame, calculationFrameInterval);
			function frame() {
				timecount = timecount + 1
				if (playing) {
					handleCalculationPlaying()
				}
			}
		}

		// playCalculationLoop()
		// playAnimationLoop()

		function playpauseSim(event) {
			if (playing) {
		 		playing = false
		 		document.getElementById('playbutton').value = 'PLAY'
		 	}
		 	else {
		 		playing = true
		 		document.getElementById('playbutton').value = 'PAUSE'
		 	}
		}

		function handleLayout2() {
			if (dmode == 'portrait') {
				
			}
			if (dmode == 'landscape') {
				
			}
		}

		// handleLayout2()


		</script>


	</body>
<html>

